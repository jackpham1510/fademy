{"version":3,"sources":["shared/hooks/useQuery.hook.ts","shared/enums/EntityStatus.ts","shared/services/CrudService.ts","shared/constants/ApiEndpoint.ts","modules/category/CategoryService.ts","shared/utils/MomentUtils.ts","shared/utils/NotificationUtils.tsx","shared/components/FdmStatusSwitch.tsx","modules/category/CategoryStatusSwitch.tsx","modules/category/CategoryTableColumns.tsx","modules/category/CategoryTable.tsx","modules/admin/ManageCategoryListPage.tsx","modules/category/CategoryFormRules.tsx","shared/components/FdmSelect.tsx","shared/utils/ArrayUtils.ts","modules/category/CategorySelect.tsx","modules/category/CategoryForm.tsx","modules/admin/CreateCategoryPage.tsx","images/logo/fdm-white.svg","shared/components/FdmLogo.tsx","shared/components/FdmLoading.tsx","modules/admin/UpdateCategoryPage.tsx","modules/admin/ManageCategoryPage.tsx","shared/enums/OrderDirection.ts","shared/components/FdmOrderDirectionSelect.tsx","shared/components/FdmPriceSlider.tsx","shared/components/FdmStarSlider.tsx","shared/hooks/useCompKey.ts","shared/utils/FdmUtils.ts","modules/user/UserService.ts","modules/user/UserSelect.tsx","shared/components/FdmImage.tsx","shared/constants/constants.ts","shared/enums/UserRole.ts","modules/auth/AuthService.ts","shared/store/FdmReducer.ts","shared/store/FdmStore.tsx","shared/store/useFdmStore.ts","shared/hooks/useAuthedUser.ts","modules/watch-list/WatchListService.ts","modules/course/enums/CourseOrderBy.ts","modules/course/CourseService.ts","modules/course/CourseToggleButton.tsx","modules/course/CourseCard.tsx","modules/course/CourseSortTypeSelect.tsx","modules/course/CourseList.tsx","modules/admin/ManageCoursePage.tsx","modules/user/UserStatusSwitch.tsx","modules/user/UserTableColumns.tsx","modules/user/UserTable.tsx","modules/admin/ManageStudentPage.tsx","modules/user/UserFormRules.ts","modules/auth/RegisterFormRules.tsx","modules/admin/CreateTeacherForm.tsx","modules/admin/CreateTeacherPage.tsx","modules/admin/ManageTeacherListPage.tsx","modules/admin/ManageTeacherPage.tsx","modules/admin/AdminPage.tsx","modules/auth/LoginForm.tsx","modules/mail-sender/MailSenderService.ts","modules/auth/AuthPage.tsx","modules/otp/useOtpSender.tsx","modules/auth/RegisterForm.tsx","modules/enrollment/EnrollmentService.ts","modules/review/ReviewService.ts","modules/review/ReviewList.tsx","modules/course/CourseReviewFormRules.ts","modules/course/CourseReviewForm.tsx","shared/utils/FormatUtils.ts","modules/study-process/StudyProcessService.ts","modules/content/ContentDetail.tsx","modules/content/ContentList.tsx","modules/course/CourseDetail.tsx","modules/course/CourseDetailPage.tsx","modules/course/CourseListOfCreator.tsx","modules/course/CourseListPage.tsx","modules/course/SaveCourseResult.tsx","modules/course/CoursePage.tsx","modules/enrollment/EnrollmentPage.tsx","modules/course/enums/CourseTopType.ts","modules/home/HomePage.tsx","modules/profile/ProfilePage.tsx","modules/profile/ChangePasswordForm.tsx","modules/profile/ProfileActionButtonGroup.tsx","modules/profile/EmailEditForm.tsx","modules/profile/FirstLastNameEditForm.tsx","modules/profile/TeacherProfileEditForm.tsx","modules/profile/ProfileEditForm.tsx","shared/enums/FileType.ts","shared/enums/StdResponseCode.ts","modules/uploader/Uploader.tsx","shared/components/FdmEditor.tsx","modules/content/ContentEditFormRules.ts","modules/content/ContentEditForm.tsx","modules/course/CourseEditFormRules.ts","modules/course/CourseEditForm.tsx","modules/teacher/TeacherAddCoursePage.tsx","modules/teacher/TeacherDashboardPage.tsx","modules/teacher/TeacherEditCoursePage.tsx","modules/teacher/TeacherPage.tsx","modules/watch-list/WatchListPage.tsx","shared/components/FdmAuthedRoute.tsx","shared/pages/NotFound.page.tsx","AppRoutes.tsx","shared/components/FdmFooter.tsx","shared/components/FdmCategoryMenu.tsx","shared/components/FdmUserDropdownMenu.tsx","shared/components/FdmHeader.tsx","App.tsx","reportWebVitals.ts","index.tsx","initAxiosInterceptors.ts"],"names":["useQuery","fetchData","useState","loading","setLoading","error","setError","data","setData","reFetch","useCallback","a","console","useEffect","useMemo","EntityStatus","CrudService","url","config","Axios","get","payload","getResult","post","result","method","put","success","this","ApiEndpoint","auth","register","login","loginGoogle","refreshAccessToken","getProfile","changePassword","user","all","search","add","checkEmail","checkUsername","updateEmail","updateFirstLastName","updateTeacherProfile","updateRole","id","updateStatus","category","topOfWeeks","checkName","findOne","update","udpateStatus","course","top","type","getDetail","increaseTotalView","content","uploader","upload","enrollment","courseId","enroll","review","paginate","studyProcess","findByCourseId","watchList","mailSender","sendOtpMail","AuthedApiEndpoints","CategoryService","request","params","create","status","name","res","exists","MomentUtils","date","moment","format","NotificationUtils","message","notification","description","style","zIndex","FdmStatusSwitch","props","onUpdateStatus","succesMessage","restProps","isActive","ACTIVE","switchStatus","DISABLED","defaultChecked","onChange","CategoryStatusSwitch","CategoryTableColumns","title","dataIndex","render","_","parent","formatDateTime","disabled","isEmpty","to","CategoryTable","page","setPage","categoriesResponse","pageSize","className","total","columns","dataSource","items","pagination","showSizeChanger","current","ManageCategoryListPage","CategoryFormRules","options","rules","required","min","max","push","validator","Error","validateTrigger","FdmSelect","getValue","getLabel","map","item","Option","value","ArrayUtils","arr","reduce","x","y","concat","Array","isArray","length","CategorySelect","onlyChildren","onlyParent","categoryResponse","categories","c","children","flatMap","placeholder","CategoryForm","propsCategory","Form","useForm","form","submitLoading","setSubmitLoading","submit","log","resetFields","onFinish","initialValues","Item","shape","htmlType","CreateCategoryPage","FdmLogo","src","fdmLogo","alt","FdmLoading","transform","LoadingOutlined","UpdateCategoryPage","categoryId","Number","match","ManageCategoryPage","defaultActiveKey","location","pathname","history","TabPane","tab","exact","from","path","component","OrderDirection","OrderDirectionDisplay","ASC","DESC","FdmOrderDirectionSelect","Object","values","val","marks","0","500","FdmPriceSlider","range","5","FdmStarSlider","useCompKey","uuidv4","key","setKey","renew","compKey","renewCompKey","FdmUtils","isNaN","UserService","email","username","UserSelect","usersResponse","firstName","lastName","FdmImage","preview","fallback","UserRole","ASSETS_URL","AuthService","qs","parse","window","replace","accessToken","refreshToken","saveTokens","sessionStorage","getItem","ACCESS_TOKEN_KEY","localStorage","REFRESH_TOKEN_KEY","response","setItem","password","removeItem","clearTokens","logout","isAuthed","oldPassword","newPassword","role","ADMIN","FdmReducer","state","action","searchTerm","initialState","FdmContext","createContext","FdmStore","useReducer","dispatch","Provider","useFdmStore","useContext","globalState","dispatcher","useAuthedUser","getUser","authedUser","CourseOrderBy","WatchListService","CourseService","CourseToggleButton","setStatus","toggleCourse","newStatus","onConfirm","danger","CourseCard","watchListLoading","setWatchListLoading","isWatchList","setIsWatchList","updateWatchList","updateStatusWithNotify","height","avatarPath","right","placement","HeartFilled","onClick","HeartOutlined","avgStar","totalReview","creator","isEnrollment","BookOutlined","Math","round","price","discount","totalEnrollment","color","diff","createdDate","complete","creatorId","removeable","CourseOrderByDisplay","PRICE","REVIEW","CourseOrderBySelect","CourseList","setPageSize","setSearchTerm","orderBy","setOrderBy","orderDirection","setOrderDirection","categoryIds","isID","filters","setFilters","searchTermCompKey","renewSearchTermCompKey","propsCategoryId","updateFilters","newFilters","propsFetchSource","fetchSource","pagingResponse","undefined","Search","allowClear","defaultValue","onSearch","idx","pageSizeOptions","mode","onAfterChange","fromPrice","toPrice","fromStar","toStar","ManageCoursePage","fetchCourses","UserStatusSwitch","UserTableColumns","editable","record","UserTable","ManageStudentPage","NORMAL","UserFormRules","confirmPassword","getFieldValue","bio","introduction","RegisterFormRules","otp","CreateTeacherForm","TEACHER","CreateTeacherPage","ManageTeacherListPage","ManageTeacherPage","TYPE_LINK","AdminPage","useHistory","defaultSelectedKeys","defaultOpenKeys","theme","onSelect","e","icon","TeamOutlined","UserOutlined","CompassOutlined","ReadFilled","LoginForm","redirect","GoogleCircleFilled","AuthTabs","MailSenderService","sendOtpWaitTimes","useOtpSender","sendOtpCount","setSendOtpCount","sendOtpWaitTime","setSendOtpWaitTime","intervalRef","useRef","sendOtp","removeInterval","clearInterval","totalWaitTime","setInterval","SendOtpButton","memo","RegisterForm","setUser","registerLoading","setRegisterLoading","otpSender","validateFields","AuthPage","width","LOGIN","REGISTER","EnrollmentService","ReviewService","ReviewList","reviewsResponse","rv","star","feedback","CourseReviewFormRules","starText","CourseReviewForm","hoverStar","setHoverStar","setStar","onReviewSuccess","marginBottom","TextArea","rows","maxLength","showCount","onHoverChange","left","FormatUtils","seconds","pattern","startOf","StudyProcessService","contentId","duration","Player","require","ContentDetail","play","setPlay","playerRef","lastStateRef","unsubscribe","subscribeToStateChange","ended","done","floor","currentTime","dangerouslySetInnerHTML","__html","autoPlay","startTime","ref","videoPath","ContentList","contents","studyProcessResponse","studyProcessMap","sp","sort","b","order","isDone","isBlock","isEnrolled","Panel","collapsible","header","formatSeconds","LockOutlined","CheckCircleOutlined","CourseDetail","enrollLoading","setEnrollLoading","onRefreshNeeded","enrollmentDetailResponse","marginTop","backgroundImage","coverPath","backgroundPosition","backgroundRepeat","backgroundSize","opacity","subDescription","updatedDate","borderLeftColor","borderLeftWidth","size","SnippetsOutlined","curr","ClockCircleOutlined","MobileOutlined","CourseDetailPage","courseResponse","CourseListOfCreator","req","CourseListPage","SaveCourseResult","subTitle","extra","CoursePage","EnrollmentPage","onlyEnrollment","BookFilled","CourseTopType","ProfileTabs","features","YoutubeOutlined","SafetyOutlined","CodeOutlined","CopyOutlined","sliderSettings","dots","infinite","speed","slidesToShow","slidesToScroll","HomePage","topCoursesOfWeek","topCategoriesOfWeek","top10Viewed","VIEW","top10New","NEW","feature","keys","tc","ChangePasswordForm","ProfileActionButtonGroup","saveLoading","setSaveLoading","onSave","save","edit","saveBtnTitle","onCancel","onEdit","editBtnTitle","EmailEditForm","setEdit","setEmail","getEmail","onSaveSuccess","_sendOtp","remainDaysToUpdateEmail","updatedEmailDate","saveEmail","FirstLastNameEditForm","saveFlName","TeacherProfileEditForm","saveTeacherProfile","ProfileEditForm","onSaveEmailSuccessHandler","Date","onSaveFlNameSuccessHandler","onSaveTeacherProfileSuccessHandler","ProfilePage","PROFILE","CHANGE_PASSWORD","FileType","StdResponseCode","configs","IMAGE","maxSize","validMimeTypes","VIDEO","Uploader","fileType","maxFiles","server","load","source","myRequest","Request","fetch","then","blob","myBlob","process","headers","onload","raw","JSON","code","SUCCESS","onUploadSuccess","pondRef","dropValidation","instantUpload","acceptedFileTypes","maxFileSize","FdmEditor","editorState","setEditorState","html","blocksFromHTML","convertFromHTML","ContentState","createFromBlockArray","contentBlocks","entityMap","EditorState","createWithContent","createEmpty","editorRef","getHtmlContent","stateToHTML","getCurrentContent","wrapperClassName","editorClassName","onEditorStateChange","ContentEditFormRules","ContentEditForm","formRef","propsContent","callbackRef","videoRef","validate","getFile","startProcess","processFile","onUpLoadSuccessHandler","filePath","getContent","Promise","resolve","reject","videos","uploaderProps","files","valuePropName","CourseEditFormRules","CourseEditForm","propsCourse","isUpdate","setContents","addContent","avatarRef","coverRef","isContentsValid","isContentValid","createCourse","getFieldsValue","uploadResultRef","avatar","cover","avatarProps","coverProps","CloseCircleFilled","splice","PlusCircleOutlined","TeacherAddCoursePage","TeacherDashboardPage","TeacherEditCoursePage","TeacherPage","activeKey","WatchListPage","onlyWatchList","FdmAuthedRoute","Component","roles","rest","includes","NotFoundPage","AppRoutes","FdmFooter","year","FdmCategoryMenu","navigate","SubMenu","onTitleClick","child","FdmUserDropdownMenu","PoweroffOutlined","FdmHeader","categoryMenu","userDropdownMenu","activeClassName","overlay","overlayClassName","CaretDownOutlined","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","FilePondPluginMediaPreview","registerPlugin","FilePondPluginFileValidateSize","FilePondPluginFileValidateType","FilePondPluginImagePreview","FilePondPluginImageResize","interceptors","use","Authorization","resp","err","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.87525ee4.chunk.js","sourcesContent":["import { useCallback, useEffect, useMemo, useState } from \"react\";\n\nexport function useQuery(fetchData: Function) {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [data, setData] = useState<any>(null);\n  const reFetch = useCallback(async () => {\n    setData(null);\n    setError(null);\n    setLoading(true);\n    \n    if (fetchData) {\n      try {\n        setData(await fetchData());\n      } catch (err) {\n        console.error(err);\n        setError(err);\n      }\n      setLoading(false);\n    }\n  }, [fetchData]);\n\n  useEffect(() => {\n    reFetch();\n  }, [reFetch]);\n\n  return useMemo(\n    () => ({\n      loading,\n      error,\n      data,\n      reFetch\n    }),\n    [loading, error, data, reFetch]\n  );\n}\n","export enum EntityStatus {\n  ACTIVE = 1,\n  DISABLED = 2,\n}\n","import Axios, { AxiosRequestConfig } from \"axios\";\n\nexport class CrudService {\n  static async get(url: string, config?: AxiosRequestConfig) {\n    const { data } = await Axios.get(url, config);\n    return data;\n  }\n\n  static async create(url: string, payload: any, getResult?: Function) {\n    const { data } = await Axios.post(url, payload);\n    return getResult ? getResult(data) : data.result;\n  }\n\n  static async put(url: string, payload: any, method?: any) {\n    const { data } = await (method ? (Axios as any)[method](url, payload) : Axios.put(url, payload));\n    return data.success;\n  }\n\n  static async delete(url: string) {\n    return this.put(url, null, 'delete');\n  }\n\n  static async post(url: string, payload: any) {\n    return this.put(url, payload, 'post');\n  }\n}\n","import { CourseTopType } from \"../../modules/course/enums/CourseTopType\";\n\nexport const ApiEndpoint = {\n  auth: {\n    register: '/api/v1/auth/register',\n    login: '/api/v1/auth/login',\n    loginGoogle: '/api/v1/auth/login/google',\n    refreshAccessToken: '/api/v1/auth/refresh-access-token',\n    getProfile: '/api/v1/auth/profile',\n    changePassword: '/api/v1/auth/change-password'\n  },\n  user: {\n    all: '/api/v1/user/all',\n    search: '/api/v1/user/search',\n    add: '/api/v1/user',\n    checkEmail: '/api/v1/user/check-email',\n    checkUsername: '/api/v1/user/check-username',\n    updateEmail: '/api/v1/user/update-email',\n    updateFirstLastName: '/api/v1/user/update-first-last-name',\n    updateTeacherProfile: '/api/v1/user/update-teacher-profile',\n    updateRole: (id: number) => `/api/v1/user/update-role/${id}`,\n    updateStatus: (id: number) => `/api/v1/user/update-status/${id}`,\n  },\n  category: {\n    all: '/api/v1/category/all',\n    search: '/api/v1/category/search',\n    topOfWeeks: '/api/v1/category/top-of-weeks',\n    add: '/api/v1/category',\n    checkName: '/api/v1/category/check-name',\n    findOne: (id: number) => `/api/v1/category/${id}`,\n    update: (id: number) => `/api/v1/category/${id}`,\n    udpateStatus: (id: number) => `/api/v1/category/update-status/${id}`\n  },\n  course: {\n    search: '/api/v1/course/search',\n    topOfWeeks: '/api/v1/course/top-of-weeks',\n    add: '/api/v1/course',\n    top: (type: CourseTopType) => `/api/v1/course/top/${type}`,\n    getDetail: (id: number) => `/api/v1/course/detail/${id}`,\n    update: (id: number) => `/api/v1/course/${id}`,\n    updateStatus: (id: number) => `/api/v1/course/update-status/${id}`,\n    increaseTotalView: (id: number) => `/api/v1/course/increase-total-view/${id}`\n  },\n  content: {\n    add: '/api/v1/content/add',\n    update: (id: number) => `/api/v1/content/update/${id}`,\n    updateStatus: (id: number) => `/api/v1/content/update-status/${id}`\n  },\n  uploader: {\n    upload: '/api/v1/uploader/upload'\n  },\n  enrollment: {\n    getDetail: (courseId: number) => `/api/v1/enrollment/${courseId}`,\n    enroll: (courseId: number) => `/api/v1/enrollment/enroll/${courseId}`\n  },\n  review: {\n    paginate: (courseId: number) => `/api/v1/review/paginate/${courseId}`,\n    add: (courseId: number) => `/api/v1/review/${courseId}`\n  },\n  studyProcess: {\n    findOne: (courseId: number) => `/api/v1/study-process/find-one/${courseId}`,\n    findByCourseId: (courseId: number) => `/api/v1/study-process/find-by-course-id/${courseId}`,\n    update: (courseId: number) => `/api/v1/study-process/${courseId}`\n  },\n  watchList: {\n    updateStatus: (courseId: number) => `/api/v1/watch-list/update-status/${courseId}`\n  },\n  mailSender: {\n    sendOtpMail: '/api/v1/mail-sender/send-otp-mail'\n  }\n}\n\nexport const AuthedApiEndpoints = [\n  ApiEndpoint.auth.getProfile,\n  ApiEndpoint.auth.refreshAccessToken,\n  ApiEndpoint.auth.changePassword,\n  ApiEndpoint.user.updateEmail,\n  ApiEndpoint.user.updateFirstLastName,\n  ApiEndpoint.user.search,\n  ApiEndpoint.user.updateRole,\n  ApiEndpoint.user.updateStatus,\n  ApiEndpoint.category.add,\n  ApiEndpoint.category.update,\n  ApiEndpoint.category.udpateStatus,\n  ApiEndpoint.course.add,\n  ApiEndpoint.course.update,\n  ApiEndpoint.course.updateStatus,\n  ApiEndpoint.course.increaseTotalView,\n  ApiEndpoint.content.update,\n  ApiEndpoint.content.updateStatus,\n  ApiEndpoint.uploader.upload,\n  ApiEndpoint.enrollment.getDetail,\n  ApiEndpoint.enrollment.enroll,\n  ApiEndpoint.review.add,\n  ApiEndpoint.studyProcess.findOne,\n  ApiEndpoint.studyProcess.findByCourseId,\n  ApiEndpoint.studyProcess.update,\n  ApiEndpoint.watchList.updateStatus,\n];","import { CrudService } from \"../../shared/services/CrudService\";\nimport { ApiEndpoint } from '../../shared/constants/ApiEndpoint';\nimport { ICategory } from \"../../shared/entities/ICategory\";\nimport { EntityStatus } from \"../../shared/enums/EntityStatus\";\nimport { ISearchCategoryRequest } from \"./types/SearchCategoryRequest\";\n\nexport class CategoryService {\n  static all() {\n    return CrudService.get(ApiEndpoint.category.all);\n  }\n\n  static search(request: ISearchCategoryRequest) {\n    return CrudService.get(ApiEndpoint.category.search, { params: request });\n  }\n\n  static topOfWeeks() {\n    return CrudService.get(ApiEndpoint.category.topOfWeeks);\n  }\n\n  static add(category: ICategory) {\n    return CrudService.create(ApiEndpoint.category.add, category);\n  }\n\n  static update(category: ICategory) {\n    return CrudService.put(ApiEndpoint.category.update(category.id), category);\n  }\n\n  static updateStatus(id: number, status: EntityStatus) {\n    return CrudService.put(ApiEndpoint.category.udpateStatus(id), {status});\n  }\n\n  static async checkName(name: string) {\n    const res = await CrudService.get(ApiEndpoint.category.checkName, { params: { name } });\n    return res.exists;\n  }\n\n  static findOne(id: number) {\n    return CrudService.get(ApiEndpoint.category.findOne(id));\n  }\n}","import moment from \"moment\";\n\nexport class MomentUtils {\n  static formatDateTime(date: any) {\n    return moment(date).format('DD/MM/YYYY HH:mm');\n  }\n}","import { notification } from \"antd\";\n\nexport class NotificationUtils {\n  static error(message: string) {\n    notification.error({\n      message: 'C li xy ra',\n      description: <>Thng tin li: <b>{message}</b></>,\n      style: {\n        zIndex: 10\n      }\n    })\n  }\n}","import { notification, Switch, SwitchProps } from 'antd';\nimport React, { useCallback } from 'react';\nimport { EntityStatus } from '../enums/EntityStatus';\nimport { NotificationUtils } from '../utils/NotificationUtils';\n\ninterface IFdmStatusSwitchProps extends SwitchProps {\n  id: number;\n  status: EntityStatus;\n  onUpdateStatus: (id: number, status: EntityStatus) => any;\n  succesMessage?: string;\n}\n\nexport function FdmStatusSwitch(props: IFdmStatusSwitchProps) {\n  const { id, status, onUpdateStatus, succesMessage, ...restProps } = props;\n  const isActive = status === EntityStatus.ACTIVE;\n  \n  const switchStatus = useCallback(async (status: boolean) => {\n    try {\n      await onUpdateStatus(id, status ? EntityStatus.ACTIVE : EntityStatus.DISABLED);\n      notification.success({\n        message: 'Success',\n        description: succesMessage || \"Update status success\"\n      })\n    } catch (err) {\n      console.error(err);\n      NotificationUtils.error(err.message);\n    }\n  }, [id, onUpdateStatus, succesMessage]);\n\n  return (\n    <Switch defaultChecked={isActive} onChange={switchStatus} {...restProps} />\n  )\n}","import { SwitchProps } from \"antd\";\nimport React from \"react\";\nimport { FdmStatusSwitch } from \"../../shared/components/FdmStatusSwitch\";\nimport { ICategory } from \"../../shared/entities/ICategory\";\nimport { CategoryService } from \"./CategoryService\";\n\ninterface ICategoryStatusSwitchProps extends SwitchProps {\n  category: ICategory;\n}\n\nexport function CategoryStatusSwitch(props: ICategoryStatusSwitchProps) {\n  const { category, ...restProps } = props;\n  return (\n    <FdmStatusSwitch\n      id={category.id}\n      status={category.status as any}\n      onUpdateStatus={CategoryService.updateStatus}\n      {...restProps}\n    />\n  );\n}\n","import { Link } from \"react-router-dom\";\nimport { ICategory } from \"../../shared/entities/ICategory\";\nimport { MomentUtils } from \"../../shared/utils/MomentUtils\";\nimport { CategoryStatusSwitch } from \"./CategoryStatusSwitch\";\n\nexport const CategoryTableColumns = [\n  {\n    title: 'ID',\n    dataIndex: 'id'\n  },\n  {\n    title: 'Name',\n    dataIndex: 'name'\n  },\n  {\n    title: 'Parent',\n    render(_: any, category: ICategory) {\n      return category.parent?.name;\n    }\n  },\n  {\n    title: 'Created date',\n    dataIndex: 'createdDate',\n    render: MomentUtils.formatDateTime\n  },\n  {\n    title: 'Status',\n    render(_: any, category: ICategory) {\n      return <CategoryStatusSwitch disabled={!category.isEmpty} category={category} />\n    }\n  },\n  {\n    title: 'Action',\n    render(_: any, category: ICategory) {\n      return (\n        <Link to={`/admin/category/update/${category.id}`}>Edit</Link>\n      )\n    }\n  }\n]","import { Table } from 'antd';\nimport React, { useCallback, useState } from 'react';\nimport { useQuery } from '../../shared/hooks/useQuery.hook';\nimport { CategoryService } from './CategoryService';\nimport { CategoryTableColumns } from './CategoryTableColumns';\n\nexport function CategoryTable() {\n  const [page, setPage] = useState(1);\n  const fetchCategories = useCallback(() => {\n    return CategoryService.search({ page, pageSize: 20, all: true });\n  }, [page]);\n\n  const categoriesResponse = useQuery(fetchCategories);\n\n  return (\n    <>\n      <div className=\"mb-4\">\n        Total: <b>{categoriesResponse.data?.total || 0}</b> categories\n      </div>\n\n      <Table\n        columns={CategoryTableColumns}\n        loading={categoriesResponse.loading || !!categoriesResponse.error}\n        dataSource={categoriesResponse.data?.items}\n        pagination={{\n          pageSize: 20,\n          total: categoriesResponse.data?.total || 0,\n          showSizeChanger: false,\n          current: page,\n          onChange: page => setPage(page)\n        }}\n      />\n    </>\n  );\n}","import React from 'react';\nimport { CategoryTable } from '../category/CategoryTable';\n\nexport function ManageCategoryListPage() {\n  return (\n    <div>\n      <CategoryTable />\n    </div>\n  )\n}","import { CategoryService } from \"./CategoryService\"\n\nexport const CategoryFormRules: any = {\n  name: (options: any) => {\n    const rules: any = [\n      { required: true, message: \"Name is required\" },\n      { min: 2, message: \"Name is too short\" },\n      { max: 255, message: \"Name is too long\" }\n    ];\n\n    if (options.checkName) {\n      rules.push({\n        async validator(_: any, name: string) {\n          const exists = await CategoryService.checkName(name);\n          if (exists) {\n            throw new Error(\"Name is existed, please use another one\");\n          }\n        },\n        validateTrigger: 'submit'\n      });\n    }\n\n    return rules;\n  }\n}","import { Select, SelectProps } from \"antd\";\nimport React from \"react\";\n\ntype Getter = (item: any) => any;\n\ninterface IFdmSelectProps extends SelectProps<any> {\n  items: any[];\n  getLabel?: Getter;\n  getValue?: Getter;\n}\n\nexport function FdmSelect(props: IFdmSelectProps) {\n  const { items, getValue, getLabel, ...restProps } = props;\n  return (\n    <Select className=\"w-full\" loading={!items} {...restProps}>\n      {items && items.map((item) => (\n        <Select.Option\n          value={getValue ? getValue(item) : item.id}\n          key={getValue ? getValue(item) : item.id}\n        >\n          {getLabel ? getLabel(item) : item.name}\n        </Select.Option>\n      ))}\n    </Select>\n  );\n}\n","export class ArrayUtils {\n  static flatMap(arr: any[]) {\n    return arr.reduce((x: any[], y: any[]) => x.concat(y), []);\n  }\n\n  static isEmpty(arr: any[]) {\n    return !Array.isArray(arr) || arr.length === 0;\n  }\n}\n","import { SelectProps } from \"antd\";\nimport React, { useMemo } from \"react\";\nimport { FdmSelect } from \"../../shared/components/FdmSelect\";\nimport { ICategory } from \"../../shared/entities/ICategory\";\nimport { useQuery } from \"../../shared/hooks/useQuery.hook\";\nimport { ArrayUtils } from \"../../shared/utils/ArrayUtils\";\nimport { CategoryService } from \"./CategoryService\";\n\ninterface ICategorySelectProps extends SelectProps<any> {\n  onlyChildren?: boolean;\n  onlyParent?: boolean;\n}\n\nexport function CategorySelect(props: ICategorySelectProps) {\n  const { onlyChildren, onlyParent, ...restProps } = props;\n  const categoryResponse = useQuery(CategoryService.all);\n  const categories = useMemo(() => {\n    if (categoryResponse.data) {\n      if (onlyParent) {\n        return categoryResponse.data;\n      }\n      let categories = categoryResponse.data.map((c: ICategory) => c.children);\n      if (!onlyChildren) {\n        categories = [categoryResponse.data, ...categories];\n      }\n      return ArrayUtils.flatMap(categories);\n    }\n    return categoryResponse.data;\n  }, [categoryResponse.data, onlyChildren, onlyParent]);\n  return <FdmSelect placeholder=\"Category...\" items={categories} {...restProps} />;\n}\n","import { Button, Form, Input, notification } from \"antd\";\nimport React, { useCallback, useState } from \"react\";\nimport { ICategory } from \"../../shared/entities/ICategory\";\nimport { NotificationUtils } from \"../../shared/utils/NotificationUtils\";\nimport { CategoryFormRules } from \"./CategoryFormRules\";\nimport { CategorySelect } from \"./CategorySelect\";\nimport { CategoryService } from \"./CategoryService\";\n\ninterface ICategoryFormProps {\n  category?: ICategory;\n}\n\nexport function CategoryForm(props: ICategoryFormProps) {\n  const { category: propsCategory } = props;\n  const [form] = Form.useForm();\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const submit = useCallback(\n    async (category: ICategory) => {\n      console.log(category);\n      setSubmitLoading(true);\n      try {\n        if (propsCategory) {\n          category.id = propsCategory.id;\n          await CategoryService.update(category);\n        } else {\n          await CategoryService.add(category);\n          form.resetFields();\n        }\n        notification.success({\n          message: \"Success\",\n          description: \"Save category success\",\n        });\n      } catch (err) {\n        console.error(err);\n        NotificationUtils.error(err.message);\n      }\n      setSubmitLoading(false);\n    },\n    [form, propsCategory]\n  );\n\n  return (\n    <Form form={form} onFinish={submit} initialValues={propsCategory}>\n      <label className=\"block mb-2\">\n        Name <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"name\" rules={CategoryFormRules.name({ checkName: !propsCategory })}>\n        <Input placeholder=\"Name...\" />\n      </Form.Item>\n      <label className=\"block mb-2\">\n        Parent category\n      </label>\n      <Form.Item name=\"parentId\">\n        <CategorySelect onlyParent={true} />\n      </Form.Item>\n      <Form.Item>\n        <Button type=\"primary\" shape=\"round\" loading={submitLoading} htmlType=\"submit\">\n          Submit\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n}\n","import React from 'react';\nimport { CategoryForm } from '../category/CategoryForm';\n\nexport function CreateCategoryPage() {\n  return (\n    <div>\n      <CategoryForm />\n    </div>\n  )\n}","export default __webpack_public_path__ + \"static/media/fdm-white.28c91e10.svg\";","import React from \"react\";\n\nimport fdmLogo from \"../../images/logo/fdm-white.svg\";\n\nexport function FdmLogo({\n  className,\n  ...props\n}: React.DetailedHTMLProps<\n  React.HTMLAttributes<HTMLDivElement>,\n  HTMLDivElement\n>) {\n  return (\n    <div\n      className={\"w-10 h-10 bg-blue-400 p-2 rounded \" + (className || \"\")}\n      {...props}\n    >\n      <img src={fdmLogo} alt=\"Fademy logo\" />\n    </div>\n  );\n}\n","import React from 'react';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport { FdmLogo } from './FdmLogo';\n\nexport function FdmLoading() {\n  return (\n    <div className=\"flex flex-col items-center justify-center py-5\">\n      <div className=\"relative text-blue-400 flex items-center justify-center\">\n        <FdmLogo className=\"absolute\" style={{ transform: 'scale(0.6)' }} />\n        <LoadingOutlined className=\"text-6xl text-blue-400 border-blue-400\" />\n      </div>\n      <div className=\"text-blue-400\">Loading, please wait...</div>\n    </div>\n  )\n}","import React, { useCallback } from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport { FdmLoading } from '../../shared/components/FdmLoading';\nimport { useQuery } from '../../shared/hooks/useQuery.hook';\nimport { CategoryForm } from '../category/CategoryForm';\nimport { CategoryService } from '../category/CategoryService';\n\nexport function UpdateCategoryPage(props: RouteComponentProps) {\n  const categoryId = Number((props.match.params as any).categoryId);\n  const fetchCategory = useCallback(() => {\n    return CategoryService.findOne(categoryId);\n  }, [categoryId]);\n  const categoryResponse = useQuery(fetchCategory);\n\n  if (!categoryResponse.data) {\n    return (\n      <div className=\"flex justify-center\">\n        <FdmLoading />\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      <CategoryForm category={categoryResponse.data} />\n    </div>\n  )\n}","import { Tabs } from \"antd\";\nimport React from \"react\";\nimport { Redirect, Route, RouteComponentProps, Switch } from \"react-router\";\nimport { ManageCategoryListPage } from \"./ManageCategoryListPage\";\nimport { CreateCategoryPage } from \"./CreateCategoryPage\";\nimport { UpdateCategoryPage } from \"./UpdateCategoryPage\";\n\nexport function ManageCategoryPage(props: RouteComponentProps) {\n  return (\n    <div>\n      <Tabs\n        defaultActiveKey={props.location.pathname}\n        onChange={(pathname) => props.history.push(pathname)}\n      >\n        <Tabs.TabPane key=\"/admin/category/list\" tab=\"Category list\" />\n        <Tabs.TabPane key=\"/admin/category/add\" tab=\"Add category\" />\n      </Tabs>\n      <Switch>\n        <Redirect exact from=\"/admin/category\" to=\"/admin/category/list\" />\n        <Route path=\"/admin/category/list\" component={ManageCategoryListPage} />\n        <Route path=\"/admin/category/add\" component={CreateCategoryPage} />\n        <Route\n          path=\"/admin/category/update/:categoryId\"\n          component={UpdateCategoryPage}\n        />\n      </Switch>\n    </div>\n  );\n}\n","export enum OrderDirection {\n  ASC = 'asc',\n  DESC = 'desc',\n}\n\nexport const OrderDirectionDisplay = {\n  [OrderDirection.ASC]: 'Asc',\n  [OrderDirection.DESC]: 'Desc'\n}","import { Select, SelectProps } from 'antd';\nimport React from 'react';\nimport { OrderDirection, OrderDirectionDisplay } from '../enums/OrderDirection';\n\nexport function FdmOrderDirectionSelect(props: SelectProps<OrderDirection>) {\n  return (\n    <Select placeholder=\"Direction\" {...props}>\n      {Object.values(OrderDirection).map(val => (\n        <Select.Option value={val}>{OrderDirectionDisplay[val]}</Select.Option>\n      ))}\n    </Select>\n  )\n}","import { Slider } from 'antd';\nimport { SliderRangeProps } from 'antd/lib/slider';\nimport React from 'react';\n\nconst marks = {\n  0: '$0',\n  500: '$500'\n}\n\nexport function FdmPriceSlider(props: SliderRangeProps) {\n  return (\n    <Slider marks={marks} {...props} range min={0} max={500} />\n  )\n}","import { Slider } from 'antd';\nimport { SliderRangeProps } from 'antd/lib/slider';\nimport React from 'react';\n\nconst marks = {\n  0: '0',\n  5: '5'\n}\n\nexport function FdmStarSlider(props: SliderRangeProps) {\n  return (\n    <Slider marks={marks} {...props} range min={0} max={5} />\n  )\n}","import { useCallback, useMemo, useState } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nexport function useCompKey() {\n  const [key, setKey] = useState(uuidv4());\n  const renew = useCallback(() => {\n    setKey(uuidv4());\n  }, []);\n  return useMemo(() => ({ compKey: key, renewCompKey: renew }), [key, renew]);\n}\n","export class FdmUtils {\n  static isID(id: any) {\n    return id && !isNaN(id) && id > 0;\n  }\n}","import { ApiEndpoint } from \"../../shared/constants/ApiEndpoint\";\nimport { IUser } from \"../../shared/entities/IUser\";\nimport { EntityStatus } from \"../../shared/enums/EntityStatus\";\nimport { CrudService } from \"../../shared/services/CrudService\";\nimport { IAddUserRequest } from \"./types/AddUserRequest\";\nimport { IPagingResponse } from \"./types/IPagingResponse\";\n\nexport class UserService {\n  static add(request: IAddUserRequest) {\n    return CrudService.create(ApiEndpoint.user.add, request);\n  }\n\n  static async checkEmail(email: string) {\n    const res = await CrudService.get(ApiEndpoint.user.checkEmail, { params: { email } });\n    return res.exists;\n  }\n\n  static async checkUsername(username: string) {\n    const res = await CrudService.get(ApiEndpoint.user.checkUsername, {\n      params: { username },\n    });\n    return res.exists;\n  }\n\n  static search(request: any): Promise<IPagingResponse<IUser>> {\n    return CrudService.get(ApiEndpoint.user.search, {\n      params: request\n    });\n  }\n  \n  static async updateEmail(payload: any) {\n    return CrudService.put(ApiEndpoint.user.updateEmail, payload);\n  }\n\n  static async updateFirstLastName(payload: any) {\n    return CrudService.put(ApiEndpoint.user.updateFirstLastName, payload);\n  }\n\n  static async updateTeacherProfile(payload: any) {\n    return CrudService.put(ApiEndpoint.user.updateTeacherProfile, payload);\n  }\n\n  static async updateStatus(id: number, status: EntityStatus) {\n    const res = await CrudService.put(ApiEndpoint.user.updateStatus(id), { status });\n    return res;\n  }\n\n  static async all() {\n    return CrudService.get(ApiEndpoint.user.all);\n  }\n}\n","import { SelectProps } from \"antd\";\nimport React from \"react\";\nimport { FdmSelect } from \"../../shared/components/FdmSelect\";\nimport { IUser } from \"../../shared/entities/IUser\";\nimport { useQuery } from \"../../shared/hooks/useQuery.hook\";\nimport { UserService } from \"./UserService\";\n\nexport function UserSelect(props: SelectProps<any>) {\n  const usersResponse = useQuery(UserService.all);\n  return (\n    <FdmSelect\n      placeholder=\"User...\"\n      loading={!usersResponse.data}\n      items={usersResponse.data}\n      getLabel={(user: IUser) => `${user.id}. ${user.username} (${user.firstName} ${user.lastName})`}\n      {...props}\n    />\n  );\n}\n","import { Image } from \"antd\";\nimport { ImageProps } from \"antd/lib/image\";\nimport React from \"react\";\n\nexport function FdmImage(props: ImageProps) {\n  return (\n    <Image\n      {...props}\n      preview={false}\n      fallback=\"data:image/png;base64,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\"\n    />\n  );\n}\n","export const HOST = process.env.NODE_ENV === 'development' ? 'http://localhost:3105' : '';\nexport const ASSETS_URL = HOST + '/assets';","export enum UserRole {\n  ADMIN = 1,\n  TEACHER = 2,\n  NORMAL = 3,\n}","import Axios from \"axios\";\nimport { ApiEndpoint } from \"../../shared/constants/ApiEndpoint\";\nimport { IUser } from \"../../shared/entities/IUser\";\nimport { UserRole } from \"../../shared/enums/UserRole\";\nimport { CrudService } from \"../../shared/services/CrudService\";\nimport { IRegisterRequest } from \"./types/IRegisterRequest\";\nimport qs from 'querystring';\n\ninterface ITokenResponse {\n  accessToken: string;\n  refreshToken: string;\n}\n\nexport class AuthService {\n  public static user: IUser;\n  private static readonly ACCESS_TOKEN_KEY = \"FDM_ACCESS_TOKEN\";\n  private static readonly REFRESH_TOKEN_KEY = \"FDM_REFRESH_TOKEN\";\n\n  static get isAuthed() {\n    const params: any = qs.parse(window.location.search.replace('?', ''));\n    if (!!params.accessToken && !!params.refreshToken) {\n      this.saveTokens(params);\n      window.location.search = '';\n    }\n    return !!this.accessToken;\n  }\n\n  static get accessToken() {\n    return sessionStorage.getItem(this.ACCESS_TOKEN_KEY);\n  }\n\n  static get refreshToken() {\n    return localStorage.getItem(this.REFRESH_TOKEN_KEY);\n  }\n\n  private static saveTokens(response: ITokenResponse) {\n    sessionStorage.setItem(this.ACCESS_TOKEN_KEY, response.accessToken);\n    localStorage.setItem(this.REFRESH_TOKEN_KEY, response.refreshToken);\n    return response;\n  }\n\n  static async login(username: string, password: string) {\n    try {\n      const { data } = await Axios.post(ApiEndpoint.auth.login, {\n        username,\n        password,\n      });\n      return this.saveTokens(data);\n    } catch (err) {\n      console.error(err);\n      return false;\n    }\n  }\n\n  static clearTokens() {\n    sessionStorage.removeItem(this.ACCESS_TOKEN_KEY);\n    localStorage.removeItem(this.REFRESH_TOKEN_KEY);\n  }\n\n  static logout() {\n    this.clearTokens();\n    window.location.pathname = \"/\";\n  }\n\n  static async refreshAccessToken() {\n    if (!this.refreshToken) {\n      return false;\n    }\n\n    try {\n      const { data } = await Axios.post(\n        ApiEndpoint.auth.refreshAccessToken,\n        null,\n        {\n          params: { refreshToken: this.refreshToken },\n        }\n      );\n      return this.saveTokens(data);\n    } catch (err) {\n      if (err?.response?.status === 404) {\n        this.logout();\n      } else {\n        console.error(err);\n      }\n      return false;\n    }\n  }\n\n  static async getUser() {\n    if (this.isAuthed) {\n      if (!this.user) {\n        this.user = await this.getProfile();\n      }\n      return this.user;\n    }\n    return null;\n  }\n\n  private static async getProfile() {\n    try {\n      const result = await Axios.get(ApiEndpoint.auth.getProfile);\n      return result.data;\n    } catch (err) {\n      console.error(err);\n      return null;\n    }\n  }\n\n  static changePassword(oldPassword: string, newPassword: string) {\n    return CrudService.put(ApiEndpoint.auth.changePassword, {\n      oldPassword,\n      newPassword,\n    });\n  }\n\n  static get isAdmin() {\n    return this.user.role === UserRole.ADMIN;\n  }\n\n  static register(user: IRegisterRequest) {\n    return CrudService.create(ApiEndpoint.auth.register, user);\n  }\n}\n","import { IAction } from \"./types/IAction\";\n\nexport function FdmReducer(state: any, action: IAction) {\n  switch (action.type) {\n    case 'SET_SEARCH_TERM':\n      return { ...state, searchTerm: action.payload || '' }\n    case 'SET_USER':\n      return { ...state, user: action.payload }\n  }\n};","import React, { createContext, useReducer } from \"react\";\nimport { FdmReducer } from \"./FdmReducer\";\n\nconst initialState = {\n  user: null,\n  searchTerm: \"\",\n};\n\nexport const FdmContext = createContext(initialState);\n\nexport function FdmStore(props: any) {\n  const [state, dispatch] = useReducer(FdmReducer, initialState);\n  return (\n    <FdmContext.Provider value={[state, dispatch] as any}>\n      {props.children}\n    </FdmContext.Provider>\n  );\n}\n","import { useCallback, useContext, useMemo } from \"react\";\nimport { FdmContext } from \"./FdmStore\";\n\ntype Dispatcher = (type: string, payload: any) => void;\n\nexport function useFdmStore(): [any, Dispatcher] {\n  const [globalState, dispatch] = useContext(FdmContext) as any;\n  const dispatcher = useCallback(\n    (type: string, payload: any) => {\n      dispatch({ type, payload });\n    },\n    [dispatch]\n  );\n  return useMemo(() => {\n    return [globalState, dispatcher];\n  }, [globalState, dispatcher]);\n}\n","import { useEffect, useMemo, useState } from \"react\";\nimport { AuthService } from \"../../modules/auth/AuthService\";\nimport { useFdmStore } from \"../store/useFdmStore\";\n\nexport function useAuthedUser() {\n  const [loading, setLoading] = useState(true);\n  const [{ user }, dispatch] = useFdmStore();\n\n  useEffect(() => {\n    (async () => {\n      if (AuthService.isAuthed) {\n        dispatch('SET_USER', await AuthService.getUser());\n      }\n      setLoading(false);\n    })();\n  }, [dispatch]);\n\n  return useMemo(\n    () => ({\n      authedUser: user,\n      loading,\n    }),\n    [user, loading]\n  );\n}\n","import { notification } from 'antd';\nimport { ApiEndpoint } from \"../../shared/constants/ApiEndpoint\";\nimport { EntityStatus } from \"../../shared/enums/EntityStatus\";\nimport { CrudService } from \"../../shared/services/CrudService\";\nimport { NotificationUtils } from '../../shared/utils/NotificationUtils';\n\nexport class WatchListService {\n  static updateStatus(courseId: number, status: EntityStatus) {\n    return CrudService.put(ApiEndpoint.watchList.updateStatus(courseId), { status });\n  }\n\n  static async updateStatusWithNotify(courseId: number, status: EntityStatus) {\n    try {\n      const success = await this.updateStatus(courseId, status);\n      const state = status === EntityStatus.ACTIVE ? \"Love\" : \"Un-love\";\n      if (success) {\n        notification.success({\n          message: \"Success\",\n          description: `${state} course success`,\n          style: {\n            zIndex: 10\n          }\n        });\n      } else {\n        notification.error({\n          message: \"Error\",\n          description: `${state} failed, please try again`,\n          style: {\n            zIndex: 10\n          }\n        });\n      }\n      return success;\n    } catch (err) {\n      console.error(err);\n      NotificationUtils.error(err.message);\n      return false;\n    }\n  }\n}","export enum CourseOrderBy {\n  PRICE = 'price',\n  REVIEW = 'avgStar',\n}\n\nexport const CourseOrderByDisplay = {\n  [CourseOrderBy.PRICE]: 'Price',\n  [CourseOrderBy.REVIEW]: 'Review'\n}","import { ApiEndpoint } from \"../../shared/constants/ApiEndpoint\";\nimport { ICourse } from \"../../shared/entities/ICourse\";\nimport { EntityStatus } from \"../../shared/enums/EntityStatus\";\nimport { CrudService } from \"../../shared/services/CrudService\";\nimport { IPagingResponse } from \"../../types/IPagingResponse\";\nimport { CourseTopType } from \"./enums/CourseTopType\";\nimport { ICourseSearchRequest } from \"./types/CourseSearchRequest\";\n\nexport class CourseService {\n  static search(\n    request: ICourseSearchRequest\n  ): Promise<IPagingResponse<ICourse>> {\n    return CrudService.get(ApiEndpoint.course.search, {\n      params: request,\n    });\n  }\n\n  static topOfWeeks() {\n    return CrudService.get(ApiEndpoint.course.topOfWeeks);\n  }\n\n  static top(type: CourseTopType) {\n    return CrudService.get(ApiEndpoint.course.top(type));\n  }\n\n  static add(course: ICourse) {\n    return CrudService.create(ApiEndpoint.course.add, course);\n  }\n\n  static update(course: ICourse) {\n    return CrudService.put(ApiEndpoint.course.update(course.id), course);\n  }\n\n  static updateStatus(id: number, status: EntityStatus) {\n    return CrudService.put(ApiEndpoint.course.updateStatus(id), { status });\n  }\n\n  static getDetail(id: number) {\n    return CrudService.get(ApiEndpoint.course.getDetail(id));\n  }\n}\n","import { Button, notification, Popconfirm } from \"antd\";\nimport React, { useCallback, useState } from \"react\";\nimport { ICourse } from \"../../shared/entities/ICourse\";\nimport { EntityStatus } from \"../../shared/enums/EntityStatus\";\nimport { NotificationUtils } from \"../../shared/utils/NotificationUtils\";\nimport { CourseService } from \"./CourseService\";\n\ninterface ICoureToggleButtonProps {\n  course: ICourse;\n  [key: string]: any;\n}\n\nexport function CourseToggleButton(props: ICoureToggleButtonProps) {\n  const { course, ...restProps } = props;\n  const [status, setStatus] = useState(course.status);\n  const [loading, setLoading] = useState(false);\n\n  const toggleCourse = useCallback(async () => {\n    setLoading(true);\n    try {\n      const newStatus =\n        status === EntityStatus.ACTIVE\n          ? EntityStatus.DISABLED\n          : EntityStatus.ACTIVE;\n      await CourseService.updateStatus(course.id, newStatus);\n      setStatus(newStatus);\n      notification.success({\n        message: \"Success\",\n        description: \"Update course's status success\",\n      });\n    } catch (err) {\n      console.error(err);\n      NotificationUtils.error(err.message);\n    }\n    setLoading(false);\n  }, [course, status]);\n\n  const isActive = status === EntityStatus.ACTIVE;\n\n  return (\n    <Popconfirm\n      title={`Are you sure to ${isActive ? \"disable\" : \"active\"} this course?`}\n      onConfirm={toggleCourse}\n    >\n      <Button\n        danger={isActive}\n        type=\"primary\"\n        shape=\"round\"\n        onChange={toggleCourse}\n        loading={loading}\n        {...restProps}\n      >\n        {isActive ? \"Disable\" : \"Active\"} course\n      </Button>\n    </Popconfirm>\n  );\n}\n","import {\n  BookOutlined,\n  HeartFilled,\n  HeartOutlined,\n  LoadingOutlined,\n} from \"@ant-design/icons\";\nimport { Button, Rate, Tag, Tooltip } from \"antd\";\nimport moment from \"moment\";\nimport React, { useCallback, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { FdmImage } from \"../../shared/components/FdmImage\";\nimport { ASSETS_URL } from \"../../shared/constants/constants\";\nimport { ICourse } from \"../../shared/entities/ICourse\";\nimport { EntityStatus } from \"../../shared/enums/EntityStatus\";\nimport { useAuthedUser } from \"../../shared/hooks/useAuthedUser\";\nimport { AuthService } from \"../auth/AuthService\";\nimport { WatchListService } from \"../watch-list/WatchListService\";\nimport { CourseToggleButton } from \"./CourseToggleButton\";\n\ninterface ICourseCardProps {\n  course: ICourse;\n  loading?: boolean;\n  className?: string;\n  removeable?: boolean;\n}\n\nexport function CourseCard(props: ICourseCardProps) {\n  const { course } = props;\n  const { authedUser } = useAuthedUser();\n  const [watchListLoading, setWatchListLoading] = useState(false);\n  const [isWatchList, setIsWatchList] = useState(course.isWatchList);\n  const updateWatchList = useCallback(\n    async (status: EntityStatus) => {\n      setWatchListLoading(true);\n      const success = await WatchListService.updateStatusWithNotify(\n        course.id,\n        status\n      );\n      if (success) {\n        setIsWatchList(status === EntityStatus.ACTIVE);\n      }\n      setWatchListLoading(false);\n    },\n    [course.id]\n  );\n\n  return (\n    <div className=\"h-fulli block rounded-lg p-5 border shadow hover:shadow-lg h-auto\">\n      <Link\n        to={`/courses/detail/${course.id}`}\n        className=\"flex justify-center mb-5\"\n      >\n        <FdmImage\n          alt={course.title}\n          className=\"w-full rounded-lg\"\n          style={{ height: \"135px\" }}\n          src={`${ASSETS_URL}/${course.avatarPath}`}\n        />\n      </Link>\n      <div className=\"flex items-start relative\">\n        <Link className=\"block pr-8\" to={`/courses/detail/${course.id}`}>\n          <h1>{course.title}</h1>\n        </Link>\n        <div>\n          <div className=\"absolute\" style={{ top: \"-5px\", right: \"5px\" }}>\n            {AuthService.isAuthed &&\n              (watchListLoading ? (\n                <LoadingOutlined className=\"text-xl\" />\n              ) : (\n                <Tooltip\n                  placement=\"left\"\n                  title={isWatchList ? \"Un-love\" : \"Love\"}\n                >\n                  <div\n                    className={\n                      \"text-xl \" +\n                      (isWatchList ? \"text-red-400\" : \"text-gray-700\")\n                    }\n                  >\n                    {isWatchList ? (\n                      <HeartFilled\n                        className=\"text-red-400\"\n                        onClick={() => updateWatchList(EntityStatus.DISABLED)}\n                      />\n                    ) : (\n                      <HeartOutlined\n                        onClick={() => updateWatchList(EntityStatus.ACTIVE)}\n                      />\n                    )}\n                  </div>\n                </Tooltip>\n              ))}\n          </div>\n        </div>\n      </div>\n      <p className=\"my-0 text-gray-700\">\n        <span className=\"text-yellow-300 mr-1\">{course.avgStar}</span>{\" \"}\n        <Rate disabled value={course.avgStar} /> ({course.totalReview})\n      </p>\n      <p className=\"my-0 text-gray-700\">{course.category?.name}</p>\n      <p className=\"my-0 text-blue-400\">\n        {course.creator?.firstName} {course.creator?.lastName}\n      </p>\n      {course.isEnrollment ? (\n        <p className=\"my-0 text-red-400 flex items-center\">\n          <BookOutlined className=\"mr-1\" /> You are studying this course\n        </p>\n      ) : (\n        <p className=\"my-0\">\n          <b className=\"text-red-400\">\n            $ {Math.round((course.price - course.discount) * 100) / 100}\n          </b>{\" \"}\n          <span className=\"line-through ml-1 text-gray-400\">\n            {course.discount ? `(${course.price})` : \"\"}\n          </span>\n        </p>\n      )}\n\n      <div className=\"mt-1\">\n        {course.totalEnrollment >= 400 && <Tag color=\"gold\">Best seller</Tag>}\n        {moment().diff(moment(course.createdDate), \"day\") <= 7 && (\n          <Tag color=\"green\">New</Tag>\n        )}\n      </div>\n\n      {!course.complete && (\n        <p className=\"text-yellow-400 mt-2 mb-0 text-xs\">\n          This course is not completed yet\n        </p>\n      )}\n\n      {course.creatorId === authedUser?.id && (\n        <Link\n          to={`/teacher/edit-course/${course.id}`}\n          className=\"mt-3 block w-fulli\"\n        >\n          <Button danger type=\"primary\" shape=\"round\" className=\"w-full\">\n            Edit course\n          </Button>\n        </Link>\n      )}\n\n      {props.removeable && (\n        <CourseToggleButton course={course} className=\"w-full mt-3\" />\n      )}\n    </div>\n  );\n}\n","import { Select, SelectProps } from 'antd';\nimport React from 'react';\nimport { CourseOrderBy, CourseOrderByDisplay } from './enums/CourseOrderBy';\n\nexport function CourseOrderBySelect(props: SelectProps<CourseOrderBy>) {\n  return (\n    <Select placeholder=\"Order by\" {...props}>\n      {Object.values(CourseOrderBy).map(val => (\n        <Select.Option key={val} value={val}>{CourseOrderByDisplay[val]}</Select.Option>\n      ))}\n    </Select>\n  )\n}","import { Divider, Input, Pagination } from \"antd\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { FdmLoading } from \"../../shared/components/FdmLoading\";\nimport { FdmOrderDirectionSelect } from \"../../shared/components/FdmOrderDirectionSelect\";\nimport { FdmPriceSlider } from \"../../shared/components/FdmPriceSlider\";\nimport { FdmStarSlider } from \"../../shared/components/FdmStarSlider\";\nimport { ICourse } from \"../../shared/entities/ICourse\";\nimport { OrderDirection } from \"../../shared/enums/OrderDirection\";\nimport { useCompKey } from \"../../shared/hooks/useCompKey\";\nimport { useQuery } from \"../../shared/hooks/useQuery.hook\";\nimport { FdmUtils } from \"../../shared/utils/FdmUtils\";\nimport { IPagingResponse } from \"../../types/IPagingResponse\";\nimport { CategorySelect } from \"../category/CategorySelect\";\nimport { UserSelect } from \"../user/UserSelect\";\nimport { CourseCard } from \"./CourseCard\";\nimport { CourseOrderBySelect } from \"./CourseSortTypeSelect\";\nimport { CourseOrderBy } from \"./enums/CourseOrderBy\";\nimport { ICourseSearchRequest } from \"./types/CourseSearchRequest\";\n\ninterface ICourseListProps {\n  categoryId?: number;\n  creatorId?: number;\n  searchTerm?: string;\n  removeable?: boolean;\n  fetchSource: (\n    request: ICourseSearchRequest\n  ) => Promise<IPagingResponse<ICourse>>;\n}\n\nexport function CourseList(props: ICourseListProps) {\n  const [page, setPage] = useState(1);\n  const [pageSize, setPageSize] = useState(20);\n  const [searchTerm, setSearchTerm] = useState(props.searchTerm || \"\");\n  const [orderBy, setOrderBy] = useState<CourseOrderBy | null>(null);\n  const [orderDirection, setOrderDirection] = useState<OrderDirection | null>(\n    null\n  );\n  const [filters, setFilters] = useState<any>({\n    categoryIds: FdmUtils.isID(props.categoryId) ? [props.categoryId] : [],\n    creatorId: FdmUtils.isID(props.creatorId) ? props.creatorId : null,\n  });\n  const searchTermCompKey = useCompKey();\n  const renewSearchTermCompKey = searchTermCompKey.renewCompKey;\n\n  const { categoryId: propsCategoryId } = props;\n  useEffect(() => {\n    if (filters.categoryIds[0] !== propsCategoryId) {\n      setFilters({\n        ...filters,\n        categoryIds: FdmUtils.isID(propsCategoryId) ? [propsCategoryId] : [],\n      });\n    }\n  }, [propsCategoryId, filters]);\n\n  const updateFilters = useCallback(\n    (newFilters: any) => {\n      setFilters({ ...filters, ...newFilters });\n      setPage(1);\n    },\n    [filters]\n  );\n\n  useEffect(() => {\n    setSearchTerm(props.searchTerm || \"\");\n    renewSearchTermCompKey();\n  }, [props.searchTerm, renewSearchTermCompKey]);\n\n  const propsFetchSource = props.fetchSource;\n  const fetchSource = useCallback(() => {\n    return propsFetchSource({\n      page,\n      pageSize,\n      searchTerm: searchTerm || undefined,\n      orderBy: orderBy as any,\n      orderDirection: orderDirection as any,\n      ...filters,\n    });\n  }, [\n    propsFetchSource,\n    page,\n    pageSize,\n    searchTerm,\n    orderBy,\n    orderDirection,\n    filters,\n  ]);\n\n  const coursesResponse = useQuery(fetchSource);\n  const pagingResponse: IPagingResponse<ICourse> = coursesResponse.data;\n  return (\n    <div className=\"mb-4 flex\">\n      <div className=\"w-5/6\">\n        <div className=\"flex items-center mb-4\">\n          <div>\n            Showing page <b>{page}</b> with page size <b>{pageSize}</b> of total{\" \"}\n            <b>{pagingResponse?.total || 0}</b> courses\n          </div>\n          <div className=\"ml-auto flex\">\n            <div className=\"flex items-center\">\n              <span className=\"mr-2\">Order by:</span>\n              <CourseOrderBySelect\n                value={orderBy as any}\n                onChange={(val) => {\n                  setOrderBy(val);\n                  if (!orderDirection) {\n                    setOrderDirection(OrderDirection.DESC);\n                  }\n                }}\n              />\n            </div>\n            <div className=\"flex items-center ml-4\">\n              <span className=\"mr-2\">Order direction:</span>\n              <FdmOrderDirectionSelect\n                disabled={!orderBy}\n                value={orderDirection as any}\n                onChange={setOrderDirection}\n              />\n            </div>\n          </div>\n        </div>\n        <Input.Search\n          key={searchTermCompKey.compKey}\n          allowClear\n          className=\"w-full mb-4\"\n          placeholder=\"Search courses...\"\n          defaultValue={searchTerm}\n          onSearch={setSearchTerm as any}\n        />\n        {!pagingResponse ? (\n          <FdmLoading />\n        ) : (\n          <div className=\"flex flex-wrap\">\n            {pagingResponse.items.map((course: ICourse, idx: number) => (\n              <div className=\"w-1/4 px-2 mb-4\">\n                <CourseCard\n                  course={course}\n                  key={idx}\n                  removeable={props.removeable}\n                />\n              </div>\n            ))}\n          </div>\n        )}\n        <div className=\"mt-4 flex justify-center\">\n          <Pagination\n            current={page}\n            pageSize={pageSize}\n            total={pagingResponse?.total || 0}\n            showSizeChanger\n            pageSizeOptions={[\"20\", \"50\"]}\n            onChange={(page, pageSize) => {\n              setPage(page);\n              setPageSize(pageSize || 20);\n            }}\n          />\n        </div>\n      </div>\n      <div className=\"w-1/6 ml-5\">\n        <div className=\"rounded-lg shadow p-3\">\n          <label className=\"block mb-4\">\n            <b>Category</b>\n          </label>\n          <CategorySelect\n            defaultValue={filters.categoryIds}\n            mode=\"multiple\"\n            onChange={(categoryIds) => updateFilters({ categoryIds })}\n          />\n          <Divider />\n          <label className=\"block mb-4\">\n            <b>Creator</b>\n          </label>\n          <UserSelect\n            defaultValue={filters.creatorId}\n            onChange={(creatorId) => updateFilters({ creatorId })}\n          />\n          <Divider />\n          <label className=\"block my-4\">\n            <b>Price</b>\n          </label>\n          <FdmPriceSlider\n            range\n            defaultValue={[0, 500]}\n            onAfterChange={([fromPrice, toPrice]) => {\n              updateFilters({ fromPrice, toPrice });\n            }}\n          />\n          <Divider />\n          <label className=\"block my-4\">\n            <b>Star</b>\n          </label>\n          <FdmStarSlider\n            range\n            defaultValue={[0, 5]}\n            onAfterChange={([fromStar, toStar]) => {\n              updateFilters({ fromStar, toStar });\n            }}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useCallback } from \"react\";\nimport { CourseList } from \"../course/CourseList\";\nimport { CourseService } from \"../course/CourseService\";\n\nexport function ManageCoursePage() {\n  const fetchCourses = useCallback((request: any) => {\n    return CourseService.search({\n      ...request,\n      all: true,\n    });\n  }, []);\n\n  return (\n    <div>\n      <CourseList fetchSource={fetchCourses} removeable={true} />\n    </div>\n  );\n}\n","import { SwitchProps } from \"antd\";\nimport React from \"react\";\nimport { FdmStatusSwitch } from \"../../shared/components/FdmStatusSwitch\";\nimport { IUser } from \"../../shared/entities/IUser\";\nimport { UserService } from \"./UserService\";\n\ninterface IUserStatusSwitchProps extends SwitchProps {\n  user: IUser;\n}\n\nexport function UserStatusSwitch(props: IUserStatusSwitchProps) {\n  const { user, ...restProps } = props;\n  return (\n    <FdmStatusSwitch\n      id={user.id}\n      status={user.status as any}\n      onUpdateStatus={UserService.updateStatus}\n      {...restProps}\n    />\n  );\n}\n","import { IUser } from \"../../shared/entities/IUser\";\nimport { MomentUtils } from \"../../shared/utils/MomentUtils\";\nimport { UserStatusSwitch } from \"./UserStatusSwitch\";\n\nexport const UserTableColumns = [\n  {\n    title: \"ID\",\n    dataIndex: \"id\",\n  },\n  {\n    title: \"User name\",\n    dataIndex: \"username\",\n  },\n  {\n    title: \"First name\",\n    dataIndex: \"firstName\",\n  },\n  {\n    title: \"Last name\",\n    dataIndex: \"lastName\",\n  },\n  {\n    title: \"Email\",\n    dataIndex: \"email\",\n  },\n  {\n    title: \"Created date\",\n    dataIndex: \"createdDate\",\n    render: MomentUtils.formatDateTime\n  },\n  {\n    title: \"Status\",\n    dataIndex: \"status\",\n    editable: true,\n    render: (_: any, record: IUser) => {\n      return <UserStatusSwitch user={record} />;\n    },\n  },\n];\n","import React, { useCallback, useState } from \"react\";\nimport { Table } from \"antd\";\nimport { useQuery } from \"../../shared/hooks/useQuery.hook\";\nimport { UserService } from \"../user/UserService\";\nimport { UserTableColumns } from \"./UserTableColumns\";\n\ninterface IUserTableProps {\n  filters?: any;\n}\n\nexport function UserTable(props: IUserTableProps) {\n  const [page, setPage] = useState(1);\n  \n  const { filters } = props;\n  const fetchUsers = useCallback(() => {\n    return UserService.search({ page, pageSize: 20, ...filters, all: true });\n  }, [page, filters]);\n\n  const usersResponse = useQuery(fetchUsers);\n\n  return (\n    <>\n      <div className=\"mb-4\">\n        Total: <b>{usersResponse.data?.total || 0}</b> rows\n      </div>\n\n      <Table\n        columns={UserTableColumns}\n        loading={usersResponse.loading || !!usersResponse.error}\n        dataSource={usersResponse.data?.items}\n        pagination={{\n          pageSize: 20,\n          total: usersResponse.data?.total || 0,\n          showSizeChanger: false,\n          current: page,\n          onChange: page => setPage(page)\n        }}\n      />\n    </>\n  );\n}\n","import { useMemo } from \"react\";\nimport { UserRole } from \"../../shared/enums/UserRole\";\nimport { UserTable } from \"../user/UserTable\";\n\nexport function ManageStudentPage() {\n  const filters = useMemo(\n    () => ({\n      role: UserRole.NORMAL,\n    }),\n    []\n  );\n\n  return (\n    <div>\n      <UserTable filters={filters} />\n    </div>\n  );\n}\n","import { Rule } from \"rc-field-form/lib/interface\";\ninterface IUserFormRules {\n  [key: string]: Rule[]\n}\n\nexport const UserFormRules: IUserFormRules = {\n  email: [\n    { required: true, message: 'E-mail is required' },\n    { type: 'email', message: 'E-mail is invalid' }\n  ],\n  username: [\n    { required: true, message: 'Username is required' },\n    { min: 4, message: 'Username is too short' },\n    { max: 255, message: 'Username is too long' }\n  ],\n  password: [\n    { required: true, message: 'Password is required' },\n    { min: 8, message: 'Password is too short' },\n    { max: 255, message: 'Password is too long' }\n  ],\n  confirmPassword: [\n    { required: true, message: 'Confirm password is required' },\n    ({ getFieldValue }) => ({\n      async validator(_, value) {\n        if (!value || getFieldValue('password') === value) {\n          return true;\n        }\n        throw new Error('Confirm password is not match');\n      },\n    })\n  ],\n  firstName: [\n    { required: true, message: 'First name is required' },\n    { min: 2, message: 'First name is too short' },\n    { max: 255, message: 'First name is too long' }\n  ],\n  lastName: [\n    { required: true, message: 'Last name is required' },\n    { min: 2, message: 'Last name is too short' },\n    { max: 255, message: 'Last name is too long' }\n  ],\n  bio: [\n    { min: 2, message: 'Bio is too short' },\n    { max: 255, message: 'Bio is too long' }\n  ],\n  introduction: [\n    { min: 2, message: 'Introduction is too short' }\n  ]\n}","import { Rule } from \"rc-field-form/lib/interface\";\nimport { UserFormRules } from \"../user/UserFormRules\";\nimport { UserService } from \"../user/UserService\";\n\ninterface IRegisterFormRules {\n  [key: string]: Rule[]\n}\n\nexport const RegisterFormRules: IRegisterFormRules = {\n  ...UserFormRules,\n  email: [\n    ...UserFormRules.email,\n    {\n      async validator(_, email) {\n        const exists = await UserService.checkEmail(email);\n        if (exists) {\n          throw new Error('E-mail is existed, please use another one');\n        }\n      },\n      validateTrigger: 'submit'\n    }\n  ],\n  username: [\n    ...UserFormRules.username,\n    {\n      async validator(_, username) {\n        const exists = await UserService.checkUsername(username);\n        if (exists) {\n          throw new Error('Username is existed, please use another one')\n        }\n      },\n      validateTrigger: 'submit'\n    }\n  ],\n  otp: [\n    { required: true, message: 'OTP is required' }\n  ]\n}","import { Button, Form, Input, notification } from \"antd\";\nimport React, { useCallback, useState } from \"react\";\nimport { UserRole } from \"../../shared/enums/UserRole\";\nimport { NotificationUtils } from \"../../shared/utils/NotificationUtils\";\nimport { RegisterFormRules } from \"../auth/RegisterFormRules\";\nimport { IAddUserWithRoleRequest } from \"../user/types/AddUserWithRoleRequest\";\nimport { UserFormRules } from \"../user/UserFormRules\";\nimport { UserService } from \"../user/UserService\";\n\nexport function CreateTeacherForm() {\n  const [form] = Form.useForm();\n  const [submitLoading, setSubmitLoading] = useState(false);\n\n  const submit = useCallback(async (user: IAddUserWithRoleRequest) => {\n    setSubmitLoading(true);\n    try {\n      user.role = UserRole.TEACHER;\n      await UserService.add(user);\n      notification.success({\n        message: \"Success\",\n        description: \"Add teacher success\",\n      });\n      form.resetFields();\n    } catch (err) {\n      console.error(err);\n      NotificationUtils.error(err.message);\n    }\n    setSubmitLoading(false);\n  }, [form]);\n\n  return (\n    <Form form={form} onFinish={submit}>\n      <label className=\"block mb-2\">\n        E-mail <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"email\" rules={RegisterFormRules.email}>\n        <Input placeholder=\"E-mail...\" />\n      </Form.Item>\n      <label className=\"block mb-2\">\n        Username <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"username\" rules={RegisterFormRules.username}>\n        <Input placeholder=\"Username...\" />\n      </Form.Item>\n      <label className=\"block mb-2\">\n        Password <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"password\" rules={UserFormRules.password}>\n        <Input placeholder=\"Password...\" type=\"password\" />\n      </Form.Item>\n      <label className=\"block mb-2\">\n        Confirm password <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"confirmPassword\" rules={UserFormRules.confirmPassword}>\n        <Input placeholder=\"Confirm password...\" type=\"password\" />\n      </Form.Item>\n      <label className=\"block mb-2\">\n        First name <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"firstName\" rules={UserFormRules.firstName}>\n        <Input placeholder=\"First name...\" />\n      </Form.Item>\n      <label className=\"block mb-2\">\n        Last name <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"lastName\" rules={UserFormRules.lastName}>\n        <Input placeholder=\"Last name...\" />\n      </Form.Item>\n      <Form.Item>\n        <Button\n          type=\"primary\"\n          shape=\"round\"\n          className=\"w-full\"\n          htmlType=\"submit\"\n          loading={submitLoading}\n        >\n          Submit\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n}\n","import React from 'react';\nimport { CreateTeacherForm } from './CreateTeacherForm';\n\nexport function CreateTeacherPage() {\n  return (\n    <CreateTeacherForm />\n  )\n}","import React, { useMemo } from 'react';\nimport { UserRole } from '../../shared/enums/UserRole';\nimport { UserTable } from '../user/UserTable';\n\nexport function ManageTeacherListPage() {\n  const filters = useMemo(\n    () => ({\n      role: UserRole.TEACHER,\n    }),\n    []\n  );\n\n  return (\n    <div>\n      <UserTable filters={filters} />\n    </div>\n  )\n}","import { Tabs } from \"antd\";\nimport React from \"react\";\nimport { Redirect, Route, RouteComponentProps, Switch } from \"react-router\";\nimport { CreateTeacherPage } from \"./CreateTeacherPage\";\nimport { ManageTeacherListPage } from \"./ManageTeacherListPage\";\n\nexport function ManageTeacherPage(props: RouteComponentProps) {\n  const { location } = props;\n  return (\n    <div>\n      <Tabs\n        defaultActiveKey={location.pathname}\n        onChange={(pathname) => props.history.push(pathname)}\n      >\n        <Tabs.TabPane key=\"/admin/teacher/list\" tab=\"Teacher list\" />\n        <Tabs.TabPane key=\"/admin/teacher/add\" tab=\"Add teacher\" />\n      </Tabs>\n      <Switch>\n        <Redirect exact from=\"/admin/teacher\" to=\"/admin/teacher/list\" />\n        <Route path=\"/admin/teacher/list\" component={ManageTeacherListPage} />\n        <Route path=\"/admin/teacher/add\" component={CreateTeacherPage} />\n      </Switch>\n    </div>\n  );\n}\n","import React from \"react\";\nimport {\n  TeamOutlined,\n  ReadFilled,\n  UserOutlined,\n  CompassOutlined,\n} from \"@ant-design/icons\";\nimport { Route, RouteComponentProps, useHistory, Switch, Redirect } from \"react-router\";\nimport { Menu } from \"antd\";\nimport { ManageCategoryPage } from \"./ManageCategoryPage\";\nimport { ManageCoursePage } from \"./ManageCoursePage\";\nimport { ManageStudentPage } from \"./ManageStudentPage\";\nimport { ManageTeacherPage } from \"./ManageTeacherPage\";\n\nconst TYPE_LINK = {\n  TEACHER: \"/admin/teacher\",\n  STUDENT: \"/admin/student\",\n  CATEGORY: \"/admin/category\",\n  COURSE: \"/admin/course\",\n};\n\nexport function AdminPage(props: RouteComponentProps) {\n  const history = useHistory();\n  return (\n    <div className=\"flex space-x-4\">\n      <div className=\"w-2/12\">\n        <Menu\n          defaultSelectedKeys={[props.location.pathname]}\n          defaultOpenKeys={[\"admin/students\"]}\n          mode=\"vertical-left\"\n          theme=\"light\"\n          onSelect={(e) => history.push(e.key as any)}\n        >\n          <Menu.Item key={TYPE_LINK.STUDENT} icon={<TeamOutlined />}>\n            Manage Student\n          </Menu.Item>\n          <Menu.Item key={TYPE_LINK.TEACHER} icon={<UserOutlined />}>\n            Manage Teacher\n          </Menu.Item>\n          <Menu.Item key={TYPE_LINK.CATEGORY} icon={<CompassOutlined />}>\n            Manage Category\n          </Menu.Item>\n          <Menu.Item key={TYPE_LINK.COURSE} icon={<ReadFilled />}>\n            Manage Course\n          </Menu.Item>\n        </Menu>\n      </div>\n      <div className=\"w-11/12\">\n        <Switch>\n          <Redirect exact from=\"/admin\" to=\"/admin/student\" />\n          <Route path=\"/admin/student\" component={ManageStudentPage} />\n          <Route path=\"/admin/teacher\" component={ManageTeacherPage} />\n          <Route path=\"/admin/category\" component={ManageCategoryPage} />\n          <Route path=\"/admin/course\" component={ManageCoursePage} />\n        </Switch>\n      </div>\n    </div>\n  );\n}\n","import { GoogleCircleFilled } from \"@ant-design/icons\";\nimport { Button, Form, Input, notification } from \"antd\";\nimport { useForm } from \"antd/lib/form/Form\";\nimport React, { useCallback } from \"react\";\nimport { UserFormRules } from \"../user/UserFormRules\";\nimport { AuthService } from \"./AuthService\";\nimport { HOST } from \"../../shared/constants/constants\";\nimport { ApiEndpoint } from \"../../shared/constants/ApiEndpoint\";\ninterface ILoginFormProps {\n  redirect?: string;\n}\n\nexport function LoginForm(props: ILoginFormProps) {\n  const [form] = useForm();\n  const submit = useCallback(\n    async (values: any) => {\n      const success = await AuthService.login(values.username, values.password);\n      if (success) {\n        window.location.pathname = props.redirect || \"/\";\n      } else {\n        notification.error({\n          message: \"Error\",\n          description: \"Username or password are wrong\"\n        })\n      }\n    },\n    [props.redirect]\n  );\n  return (\n    <Form form={form} onFinish={submit}>\n      <label className=\"block mb-2\">\n        Username <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"username\" rules={UserFormRules.username}>\n        <Input placeholder=\"Username...\" />\n      </Form.Item>\n      <label className=\"block mb-2\">\n        Password <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"password\" rules={UserFormRules.password}>\n        <Input placeholder=\"Password...\" type=\"password\" />\n      </Form.Item>\n      <Form.Item>\n        <Button\n          type=\"primary\"\n          shape=\"round\"\n          className=\"w-full mb-4\"\n          htmlType=\"submit\"\n        >\n          Login\n        </Button>\n        <Button\n          type=\"primary\"\n          shape=\"round\"\n          className=\"w-full\"\n          danger\n          onClick={() =>\n            (window.location.replace(HOST + ApiEndpoint.auth.loginGoogle))\n          }\n        >\n          <GoogleCircleFilled\n            className=\"text-xl\"\n            style={{ transform: \"translateY(-2px)\" }}\n          />{\" \"}\n          Sign-in with Google\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n}\n","import { ApiEndpoint } from \"../../shared/constants/ApiEndpoint\";\nimport { CrudService } from \"../../shared/services/CrudService\";\n\nexport class MailSenderService {\n  static sendOtp(name: string, email: string) {\n    return CrudService.post(ApiEndpoint.mailSender.sendOtpMail, {\n      name, email\n    });\n  }\n}","import { Tabs } from \"antd\";\nimport React, { useMemo } from \"react\";\nimport { Redirect, Route, RouteComponentProps, Switch, useHistory } from \"react-router\";\nimport { AuthService } from \"./AuthService\";\nimport { LoginForm } from \"./LoginForm\";\nimport { RegisterForm } from \"./RegisterForm\";\n\nenum AuthTabs {\n  LOGIN = \"/auth/login\",\n  REGISTER = \"/auth/register\",\n}\n\nexport function AuthPage(props: RouteComponentProps) {\n  const { location } = props;\n  const history = useHistory();\n  const redirect = useMemo(() => {\n    if (!!location.state && typeof location.state === \"object\") {\n      return (location.state as any)?.redirect || '/';\n    }\n  }, [location]);\n\n  if (AuthService.isAuthed) {\n    history.push(redirect);\n  }\n\n  return (\n    <>\n      <div className=\"flex justify-center items-center\">\n        <div className=\"px-10 py-5 rounded-lg shadow\" style={{ width: \"400px\" }}>\n          <Tabs\n            defaultActiveKey={location.pathname}\n            onChange={(pathname) => history.push({ pathname, state: { redirect } })}\n          >\n            <Tabs.TabPane tab=\"Login\" key={AuthTabs.LOGIN} />\n            <Tabs.TabPane tab=\"Register\" key={AuthTabs.REGISTER} />\n          </Tabs>\n          <Switch>\n            <Redirect exact from=\"/auth\" to=\"/auth/login\" />\n            <Route path=\"/auth/login\" component={LoginForm} />\n            <Route path=\"/auth/register\" component={RegisterForm} />\n          </Switch>\n        </div>\n      </div>\n    </>\n  );\n}\n","import { Button, ButtonProps, notification } from \"antd\";\nimport { memo, useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { NotificationUtils } from \"../../shared/utils/NotificationUtils\";\nimport { MailSenderService } from \"../mail-sender/MailSenderService\";\nimport { IAddUserRequest } from \"../user/types/AddUserRequest\";\n\nconst sendOtpWaitTimes = [0, 30, 300, 600, 1800];\n\nexport function useOtpSender() {\n  const [sendOtpCount, setSendOtpCount] = useState(0);\n  const [sendOtpWaitTime, setSendOtpWaitTime] = useState(0);\n  const intervalRef = useRef<any>();\n\n  const sendOtp = useCallback(\n    async (user: IAddUserRequest) => {\n      try {\n        await MailSenderService.sendOtp(user.firstName, user.email);\n        setSendOtpCount(sendOtpCount + 1);\n        notification.success({\n          message: \"Success\",\n          description: (\n            <>\n              An e-mail with OTP is sent for <b>{user.email}</b>, please check\n              it\n            </>\n          ),\n        });\n      } catch (err) {\n        console.error(err);\n        NotificationUtils.error(err.message);\n      }\n    },\n    [sendOtpCount]\n  );\n\n  const removeInterval = useCallback(() => {\n    if (!!intervalRef.current) {\n      clearInterval(intervalRef.current);\n    }\n  }, []);\n\n  useEffect(() => {\n    removeInterval();\n\n    let totalWaitTime =\n      sendOtpWaitTimes[Math.min(sendOtpCount, sendOtpWaitTimes.length - 1)];\n    setSendOtpWaitTime(totalWaitTime);\n    intervalRef.current = setInterval(() => {\n      if (--totalWaitTime === 0) {\n        removeInterval();\n      }\n      setSendOtpWaitTime(totalWaitTime);\n    }, 1000);\n\n    return removeInterval;\n  }, [sendOtpCount, removeInterval]);\n\n  const SendOtpButton = memo((props: ButtonProps) => (\n      <Button\n        type=\"primary\"\n        shape=\"round\"\n        loading={sendOtpWaitTime > 0}\n        {...props}\n      >\n        {sendOtpWaitTime > 0\n          ? `Please wait for ${sendOtpWaitTime} (s)...`\n          : \"Re-send OTP\"}\n      </Button>\n  ));\n\n  return useMemo(\n    () => ({\n      sendOtp,\n      removeInterval,\n      SendOtpButton,\n    }),\n    [SendOtpButton, removeInterval, sendOtp]\n  );\n}\n","import { Button, Form, Input, notification } from \"antd\";\nimport { useForm } from \"antd/lib/form/Form\";\nimport React, { useCallback, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { NotificationUtils } from \"../../shared/utils/NotificationUtils\";\nimport { useOtpSender } from \"../otp/useOtpSender\";\nimport { IAddUserRequest } from \"../user/types/AddUserRequest\";\nimport { UserFormRules } from \"../user/UserFormRules\";\nimport { AuthService } from \"./AuthService\";\nimport { RegisterFormRules } from \"./RegisterFormRules\";\n\nexport function RegisterForm() {\n  const [form] = useForm();\n  const [user, setUser] = useState<IAddUserRequest | null>(null);\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const [registerLoading, setRegisterLoading] = useState(false);\n  const history = useHistory();\n  const otpSender = useOtpSender();\n\n  const { sendOtp } = otpSender;\n  const submit = useCallback(\n    async (user: IAddUserRequest) => {\n      setSubmitLoading(true);\n      await sendOtp(user);\n      setSubmitLoading(false);\n      setUser(user);\n    },\n    [sendOtp]\n  );\n\n  const register = useCallback(async () => {\n    setRegisterLoading(true);\n    try {\n      let request;\n      try {\n        request = await form.validateFields();\n      } catch {\n        return;\n      }\n\n      await AuthService.register(request);\n      \n      notification.success({\n        message: \"Success\",\n        description: \"Register success, try to login your account\",\n      });\n      history.push(\"/auth/login\");\n    } catch (err) {\n      console.error(err);\n      NotificationUtils.error(err.message);\n    }\n    setRegisterLoading(false);\n  }, [history, form]);\n\n  const { SendOtpButton } = otpSender;\n  return (\n    <Form form={form} onFinish={submit}>\n      <label className=\"block mb-2\">\n        E-mail <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"email\" rules={RegisterFormRules.email}>\n        <Input placeholder=\"E-mail...\" />\n      </Form.Item>\n      <label className=\"block mb-2\">\n        Username <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"username\" rules={RegisterFormRules.username}>\n        <Input placeholder=\"Username...\" />\n      </Form.Item>\n      <label className=\"block mb-2\">\n        Password <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"password\" rules={UserFormRules.password}>\n        <Input placeholder=\"Password...\" type=\"password\" />\n      </Form.Item>\n      <label className=\"block mb-2\">\n        Confirm password <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"confirmPassword\" rules={UserFormRules.confirmPassword}>\n        <Input placeholder=\"Confirm password...\" type=\"password\" />\n      </Form.Item>\n      <label className=\"block mb-2\">\n        First name <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"firstName\" rules={UserFormRules.firstName}>\n        <Input placeholder=\"First name...\" />\n      </Form.Item>\n      <label className=\"block mb-2\">\n        Last name <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"lastName\" rules={UserFormRules.lastName}>\n        <Input placeholder=\"Last name...\" />\n      </Form.Item>\n      {!user && (\n        <Form.Item>\n          <Button\n            type=\"primary\"\n            shape=\"round\"\n            className=\"w-full\"\n            htmlType=\"submit\"\n            loading={submitLoading}\n          >\n            Submit\n          </Button>\n        </Form.Item>\n      )}\n      {!!user && (\n        <>\n          <label className=\"block mb-2\">\n            OTP <b className=\"text-red-400\">*</b>\n          </label>\n          <Form.Item name=\"otp\" rules={RegisterFormRules.otp}>\n            <Input placeholder=\"OTP...\" />\n          </Form.Item>\n          <Form.Item>\n            <SendOtpButton\n              className=\"w-full mb-4\"\n              onClick={() => otpSender.sendOtp(user)}\n            />\n            <Button\n              type=\"primary\"\n              shape=\"round\"\n              className=\"w-full\"\n              onClick={() => register()}\n              loading={registerLoading}\n            >\n              Register\n            </Button>\n          </Form.Item>\n        </>\n      )}\n    </Form>\n  );\n}\n","import { ApiEndpoint } from \"../../shared/constants/ApiEndpoint\";\nimport { CrudService } from \"../../shared/services/CrudService\";\n\nexport class EnrollmentService {\n  static getDetail(courseId: number) {\n    return CrudService.get(ApiEndpoint.enrollment.getDetail(courseId));\n  }\n\n  static enroll(courseId: number) {\n    return CrudService.create(ApiEndpoint.enrollment.enroll(courseId), null);\n  }\n}","import { ApiEndpoint } from \"../../shared/constants/ApiEndpoint\";\nimport { CrudService } from \"../../shared/services/CrudService\";\nimport { IPagingRequest } from \"../../types/IPagingRequest\";\nimport { ReviewRequest } from \"./types/ReviewRequest\";\n\nexport class ReviewService {\n  static paginate(courseId: number, request: IPagingRequest) {\n    return CrudService.get(ApiEndpoint.review.paginate(courseId), {\n      params: request\n    });\n  }\n\n  static review(courseId: number, review: ReviewRequest) {\n    return CrudService.create(ApiEndpoint.review.add(courseId), review);\n  }\n}","import { Pagination, Rate } from \"antd\";\nimport moment from \"moment\";\nimport React, { useCallback, useState } from \"react\";\nimport { FdmLoading } from \"../../shared/components/FdmLoading\";\nimport { IReview } from \"../../shared/entities/IReview\";\nimport { useQuery } from \"../../shared/hooks/useQuery.hook\";\nimport { ReviewService } from \"./ReviewService\";\n\ninterface IReviewListProps {\n  courseId: number;\n}\n\nconst PAGE_SIZE = 10;\n\nexport function ReviewList(props: IReviewListProps) {\n  const { courseId } = props;\n  const [page, setPage] = useState(1);\n  const fetchReviews = useCallback(() => {\n    return ReviewService.paginate(courseId, {\n      page,\n      pageSize: PAGE_SIZE,\n    });\n  }, [page, courseId]);\n  const reviewsResponse = useQuery(fetchReviews);\n  return (\n    <div>\n      <div>\n        {!reviewsResponse.data ? (\n          <div className=\"flex justify-center items-center\">\n            <FdmLoading />\n          </div>\n        ) : (\n          <>\n            <div className=\"mb-2\">Total: {reviewsResponse.data.total} reviews</div>\n            <div className=\"flex flex-wrap\">\n              {reviewsResponse.data.items.map((rv: IReview) => (\n                <div className=\"rounded-lg border py-3 px-5 mb-2 w-1/2\">\n                  <p className=\"mb-0\"><b>{rv.user.firstName} {rv.user.lastName} ({rv.user.username})</b></p>\n                  <p className=\"flex mb-2 items-center\">\n                    <Rate disabled value={rv.star} />{\" \"}\n                    <i className=\"ml-4 inline-block mt-1\">{moment(rv.createdDate).format('DD/MM/YYYY HH:mm')}</i>\n                  </p>\n                  <p className=\"mb-0\">{rv.feedback}</p>\n                </div>\n              ))}\n            </div>\n          </>\n        )}\n      </div>\n      <div className=\"flex justify-center mt-4\">\n        <Pagination\n          current={page}\n          pageSize={PAGE_SIZE}\n          total={reviewsResponse.data?.total || 0}\n          onChange={(page) => setPage(page)}\n        />\n      </div>\n    </div>\n  );\n}\n","import { Rule } from \"rc-field-form/lib/interface\";\n\ninterface ICourseReviewFormRules {\n  [key: string]: Rule[]\n}\n\nexport const CourseReviewFormRules: ICourseReviewFormRules = {\n  feedback: [\n    { required: true, message: 'Feedback is required' },\n    { max: 1000, message: 'Feedback is too long' }\n  ],\n  star: [\n    { required: true, message: 'Star is required' },\n    { type: 'number', min: 0, max: 5, message: 'Star is invalid' }\n  ]\n}","import { Button, Form, Input, notification, Rate } from \"antd\";\nimport React, { useCallback, useState } from \"react\";\nimport { NotificationUtils } from \"../../shared/utils/NotificationUtils\";\nimport { ReviewService } from \"../review/ReviewService\";\nimport { CourseReviewFormRules } from \"./CourseReviewFormRules\";\n\ninterface ICourseReviewFormProps {\n  courseId: number;\n  onReviewSuccess: Function;\n}\n\nconst starText = [\n  \"Add your rate\",\n  \"Hate\",\n  \"Don't like\",\n  \"Ok\",\n  \"Like\",\n  \"Great like\",\n];\n\nexport function CourseReviewForm(props: ICourseReviewFormProps) {\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const [hoverStar, setHoverStar] = useState(0);\n  const [star, setStar] = useState(0);\n  const [form] = Form.useForm();\n\n  const { courseId, onReviewSuccess } = props;\n  const submit = useCallback(\n    async (values: any) => {\n      setSubmitLoading(true);\n      try {\n        await ReviewService.review(courseId, values);\n        form.resetFields();\n        setHoverStar(0);\n        setStar(0);\n        notification.success({\n          message: \"Success\",\n          description: \"Thank you for your feedback\",\n        });\n        onReviewSuccess();\n      } catch (err) {\n        console.error(err);\n        NotificationUtils.error(err.message);\n      }\n      setSubmitLoading(false);\n    },\n    [courseId, onReviewSuccess, form]\n  );\n\n  return (\n    <Form form={form} onFinish={submit}>\n      <Form.Item\n        name=\"feedback\"\n        style={{ marginBottom: \".5rem\" }}\n        rules={CourseReviewFormRules.feedback}\n      >\n        <Input.TextArea\n          placeholder=\"Add your feedback...\"\n          rows={4}\n          maxLength={1000}\n          showCount\n        />\n      </Form.Item>\n      <div className=\"relative flex items-center\">\n        <Form.Item\n          name=\"star\"\n          style={{ marginBottom: \".5rem\" }}\n          rules={CourseReviewFormRules.star}\n        >\n          <Rate onHoverChange={setHoverStar} onChange={setStar} />\n        </Form.Item>\n        <span\n          className=\"text-red-400 absolute\"\n          style={{ left: \"145px\", top: \"7px\" }}\n        >\n          {starText[hoverStar || star] || \"Add your rate\"}\n        </span>\n      </div>\n      <Form.Item>\n        <Button\n          loading={submitLoading}\n          type=\"primary\"\n          shape=\"round\"\n          htmlType=\"submit\"\n        >\n          Submit feedback\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n}\n","import moment from \"moment\";\n\nexport class FormatUtils {\n  static formatCurrency(val: any) {\n    return (\"\" + val).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  }\n  static parseCurrency(val: any) {\n    return (\"\" + val).replace(/\\$\\s?|(,*)/g, \"\");\n  }\n  static formatSeconds(seconds: number) {\n    let pattern = \"mm:ss\";\n    if (seconds >= 3600) {\n      pattern = \"HH:\" + pattern;\n    }\n    return moment(\"2015-01-01\")\n      .startOf(\"day\")\n      .seconds(seconds)\n      .format(pattern);\n  }\n}\n","import { ApiEndpoint } from \"../../shared/constants/ApiEndpoint\";\nimport { CrudService } from \"../../shared/services/CrudService\";\n\nexport class StudyProcessService {\n  static findOne(courseId: number, contentId: number) {\n    return CrudService.get(ApiEndpoint.studyProcess.findOne(courseId), {\n      params: { contentId },\n    });\n  }\n\n  static findByCourseId(courseId: number) {\n    return CrudService.get(ApiEndpoint.studyProcess.findByCourseId(courseId));\n  }\n\n  static update(courseId: number, contentId: number, duration: number) {\n    return CrudService.put(ApiEndpoint.studyProcess.update(courseId), {\n      contentId,\n      duration,\n    });\n  }\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { IContent } from \"../../shared/entities/IContent\";\nimport { ASSETS_URL } from \"../../shared/constants/constants\";\nimport { Divider } from \"antd\";\nimport { StudyProcessService } from \"../study-process/StudyProcessService\";\nimport { IStudyProcess } from \"../../shared/entities/IStudyProcess\";\nconst { Player } = require(\"video-react\");\n\ninterface IContentDetailProps {\n  courseId: number;\n  content: IContent;\n  studyProcess: IStudyProcess\n}\n\nexport function ContentDetail(props: IContentDetailProps) {\n  const { studyProcess } = props;\n  const [play, setPlay] = useState(false);\n  const playerRef = useRef<any>();\n  const lastStateRef = useRef<any>();\n  const contentId = props.content.id;\n  const courseId = props.courseId;\n\n  useEffect(() => {\n    let unsubscribe: any;\n    if (play) {\n      console.log(playerRef);\n      unsubscribe = playerRef.current.subscribeToStateChange((state: any) => {\n        lastStateRef.current = state;\n        if (state.ended && !(studyProcess && studyProcess.done)) {\n          StudyProcessService.update(\n            courseId,\n            contentId,\n            Math.floor(state.duration)\n          );\n        }\n      });\n    }\n    return () => {\n      if (play) {\n        if (lastStateRef.current && lastStateRef.current.currentTime > 0) {\n          StudyProcessService.update(\n            courseId,\n            contentId,\n            Math.floor(lastStateRef.current.currentTime)\n          );\n        }\n        unsubscribe();\n      }\n    };\n  }, [play, courseId, contentId, studyProcess]);\n\n  return (\n    <div>\n      <div\n        dangerouslySetInnerHTML={{ __html: props.content.description }}\n      ></div>\n      <Divider />\n      {play ? (\n        <Player\n          autoPlay\n          startTime={studyProcess?.duration || 0}\n          ref={(ref: any) => (playerRef.current = ref)}\n          src={`${ASSETS_URL}/${props.content.videoPath}`}\n        />\n      ) : (\n        <div className=\"mt-2\">\n          <span\n            className=\"cursor-pointer text-blue-400 hover:underline\"\n            onClick={() => setPlay(true)}\n          >\n            &bull; View content video\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { CheckCircleOutlined, LockOutlined } from \"@ant-design/icons\";\nimport { Collapse } from \"antd\";\nimport React, { useCallback, useMemo } from \"react\";\nimport { IContent } from \"../../shared/entities/IContent\";\nimport { IStudyProcess } from \"../../shared/entities/IStudyProcess\";\nimport { useQuery } from \"../../shared/hooks/useQuery.hook\";\nimport { FormatUtils } from \"../../shared/utils/FormatUtils\";\nimport { StudyProcessService } from \"../study-process/StudyProcessService\";\nimport { ContentDetail } from \"./ContentDetail\";\n\ninterface IContentListProps {\n  courseId: number;\n  contents: IContent[];\n  isEnrolled?: boolean;\n}\n\nexport function ContentList(props: IContentListProps) {\n  const { contents, courseId } = props;\n  const fetchStudyProcesses = useCallback(() => {\n    return StudyProcessService.findByCourseId(courseId);\n  }, [courseId]);\n\n  const studyProcessResponse = useQuery(fetchStudyProcesses);\n  const studyProcessMap = useMemo(() => {\n    if (studyProcessResponse.data) {\n      return studyProcessResponse.data.reduce((map: any, sp: IStudyProcess) => {\n        map[sp.contentId] = sp;\n        return map;\n      }, {});\n    }\n    return {};\n  }, [studyProcessResponse.data]);\n\n  return (\n    <Collapse>\n      {contents\n        .sort((a, b) => a.order - b.order)\n        .map((content) => {\n          const studyProcess = studyProcessMap[content.id];\n          const isDone = !!studyProcess?.done;\n          const isBlock = !content.preview && !props.isEnrolled;\n          return (\n            <Collapse.Panel\n              className={isDone ? \"bg-green-300\" : \"\"}\n              collapsible={isBlock ? \"disabled\" : \"header\"}\n              header={\n                <div className=\"flex items-center\">\n                  <div>\n                    [{FormatUtils.formatSeconds(studyProcess?.duration || 0)} /{\" \"}\n                    {FormatUtils.formatSeconds(content.duration)}]{\" \"}\n                    {content.title}\n                  </div>\n                  {isBlock && (\n                    <div className=\"ml-auto\">\n                      <LockOutlined />\n                    </div>\n                  )}\n                  {isDone && (\n                    <div className=\"ml-auto\">\n                      <CheckCircleOutlined />\n                    </div>\n                  )}\n                </div>\n              }\n              key={content.id}\n            >\n              <ContentDetail\n                studyProcess={studyProcess}\n                courseId={props.courseId}\n                content={content}\n              />\n            </Collapse.Panel>\n          );\n        })}\n    </Collapse>\n  );\n}\n","import {\n  BookOutlined,\n  ClockCircleOutlined,\n  HeartOutlined,\n  MobileOutlined,\n  SnippetsOutlined,\n} from \"@ant-design/icons\";\nimport { Button, Divider, notification, Popconfirm, Rate, Tag } from \"antd\";\nimport moment from \"moment\";\nimport React, { useCallback, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { FdmImage } from \"../../shared/components/FdmImage\";\nimport { ASSETS_URL } from \"../../shared/constants/constants\";\nimport { ICourse } from \"../../shared/entities/ICourse\";\nimport { EntityStatus } from \"../../shared/enums/EntityStatus\";\nimport { useQuery } from \"../../shared/hooks/useQuery.hook\";\nimport { NotificationUtils } from \"../../shared/utils/NotificationUtils\";\nimport { AuthService } from \"../auth/AuthService\";\nimport { EnrollmentService } from \"../enrollment/EnrollmentService\";\nimport { ReviewList } from \"../review/ReviewList\";\nimport { WatchListService } from \"../watch-list/WatchListService\";\nimport { CourseReviewForm } from \"./CourseReviewForm\";\nimport { FormatUtils } from \"../../shared/utils/FormatUtils\";\nimport { ContentList } from \"../content/ContentList\";\n\ninterface ICourseDetailProps {\n  course: ICourse;\n  onRefreshNeeded: Function;\n}\n\nexport function CourseDetail(props: ICourseDetailProps) {\n  const history = useHistory();\n  const [enrollLoading, setEnrollLoading] = useState(false);\n  const [watchListLoading, setWatchListLoading] = useState(false);\n  const [isWatchList, setIsWatchList] = useState(props.course.isWatchList);\n  const updateWatchList = useCallback(async () => {\n    if (!AuthService.isAuthed) {\n      return history.push(\"/auth/login\");\n    }\n    setWatchListLoading(true);\n    const success = await WatchListService.updateStatusWithNotify(\n      props.course.id,\n      props.course.isWatchList ? EntityStatus.DISABLED : EntityStatus.ACTIVE\n    );\n    if (success) {\n      setIsWatchList(!props.course.isWatchList);\n    }\n    setWatchListLoading(false);\n  }, [history, props.course]);\n\n  const { onRefreshNeeded } = props;\n  const enroll = useCallback(async () => {\n    if (!AuthService.isAuthed) {\n      return history.push(\"/auth/login\");\n    }\n\n    setEnrollLoading(true);\n    try {\n      await EnrollmentService.enroll(props.course.id);\n      notification.success({\n        message: \"Success\",\n        description: \"Enroll success, hope that you will have valuable lessons\",\n        style: {\n          zIndex: 10,\n        },\n      });\n      onRefreshNeeded();\n    } catch (err) {\n      console.error(err);\n      NotificationUtils.error(err.message);\n    }\n    setEnrollLoading(false);\n  }, [history, props.course, onRefreshNeeded]);\n\n  const fetchEnrollmentDetail = useCallback(() => {\n    if (AuthService.isAuthed) {\n      return EnrollmentService.getDetail(props.course.id);\n    }\n    return null;\n  }, [props.course.id]);\n  const enrollmentDetailResponse = useQuery(fetchEnrollmentDetail);\n  const isEnrolled = AuthService.isAuthed && !!enrollmentDetailResponse.data;\n  return (\n    <div className=\"flex\">\n      <div\n        className=\"absolute bg-gray-900 w-full left-0\"\n        style={{\n          zIndex: 1,\n          height: \"400px\",\n          marginTop: \"-2rem\",\n          backgroundImage: `url(${ASSETS_URL}/${props.course.coverPath})`,\n          backgroundPosition: \"center\",\n          backgroundRepeat: \"no-repeat\",\n          backgroundSize: \"cover\",\n        }}\n      ></div>\n      <div className=\"absolute bg-gray-900 w-full left-0\" style={{ zIndex: 2, height: \"400px\", marginTop: '-2rem', opacity: 0.75 }}></div>\n      <div className=\"w-3/4 pr-4\" style={{ zIndex: 2 }}>\n        <p className=\"text-white\">\n          <Link\n            to={`/courses/${props.course.category.parent.id}`}\n            className=\"text-blue-400 \"\n          >\n            {props.course.category.parent.name}\n          </Link>{\" \"}\n          &gt;{\" \"}\n          <Link\n            to={`/courses/${props.course.category.id}`}\n            className=\"text-blue-400\"\n          >\n            {props.course.category.name}\n          </Link>\n        </p>\n        <h1 className=\"text-3xl text-white\">\n          <b>{props.course.title}</b>\n        </h1>\n        <h3 className=\"text-lg text-white\">{props.course.subDescription}</h3>\n        <p className=\"mb-2 text-white\">\n          <span className=\"text-yellow-300 mr-1\">{props.course.avgStar}</span>{\" \"}\n          <Rate disabled value={props.course.avgStar} /> (\n          {props.course.totalReview})\n        </p>\n        <div className=\"mt-1 mb-4\">\n          {props.course.totalEnrollment >= 400 && (\n            <Tag color=\"gold\">Best seller</Tag>\n          )}\n          {moment().diff(moment(props.course.createdDate), \"day\") <= 7 && (\n            <Tag color=\"green\">New</Tag>\n          )}\n        </div>\n        <p className=\"mb-2 text-white\">\n          Created by{\" \"}\n          <i className=\"text-blue-400\">\n            {props.course.creator.firstName} {props.course.creator.lastName}\n          </i>\n        </p>\n        <p className=\"text-white\">\n          Last updated:{\" \"}\n          <i className=\"text-blue-400\">\n            {moment(props.course.updatedDate).format(\"DD/MM/YYYY HH:mm\")}\n          </i>\n        </p>\n        <div>\n          <Button\n            loading={watchListLoading}\n            type={isWatchList ? 'default' : 'primary'}\n            danger\n            shape=\"round\"\n            onClick={updateWatchList}\n          >\n            <div className=\"flex items-center\">\n              {isWatchList ? \"Remove\" : \"Add\"} watch list{\" \"}\n              <HeartOutlined className=\"ml-2\" />\n            </div>\n          </Button>\n        </div>\n        <div className=\"mt-24\">\n          <h3 className=\"text-xl\">\n            <b>Description</b>\n          </h3>\n          <div\n            dangerouslySetInnerHTML={{ __html: props.course.description }}\n          ></div>\n          <h3 className=\"mt-8 text-xl\">\n            <b>Course contents</b>\n          </h3>\n          {Array.isArray(props.course.contents) && props.course.contents.length > 0 && (\n            <ContentList courseId={props.course.id} contents={props.course.contents} isEnrolled={isEnrolled} />\n          )}\n          <h3 className=\"mt-8 text-xl\">\n            <b>About the creator</b>\n          </h3>\n          <div\n            className=\"border py-2 px-6 rounded-lg\"\n            style={{\n              borderLeftColor: \"rgb(96, 165, 250)\",\n              borderLeftWidth: \".2rem\",\n            }}\n          >\n            <h4 className=\"text-red-500 text-xl mb-1\">\n              {props.course.creator?.firstName} {props.course.creator?.lastName}\n            </h4>\n            <p className=\"text-gray-500\">{props.course.creator.bio}</p>\n            <p className=\"mb-0\">{props.course.creator.introduction}</p>\n          </div>\n          <h3 className=\"mt-8 text-xl mb-4\">\n            <b>Student feedbacks</b>\n          </h3>\n          {isEnrolled && (\n            <CourseReviewForm\n              courseId={props.course.id}\n              onReviewSuccess={props.onRefreshNeeded}\n            />\n          )}\n          <ReviewList courseId={props.course.id} />\n        </div>\n      </div>\n      <div className=\"w-1/4 relative\" style={{ zIndex: 2 }}>\n        <div className=\"p-5 border rounded-lg w-full bg-white\">\n          <div className=\"flex justify-center mb-5\">\n            <FdmImage\n              alt={props.course.title}\n              className=\"w-full rounded-lg\"\n              src={`${ASSETS_URL}/${props.course.avatarPath}`}\n            />\n          </div>\n          {!isEnrolled && (\n            <>\n              <h1 className=\"mb-2\">\n                <b className=\"text-red-400 text-xl\">\n                  ${\" \"}\n                  {Math.round(\n                    (props.course.price - props.course.discount) * 100\n                  ) / 100}\n                </b>{\" \"}\n                <span className=\"line-through ml-1 text-gray-400\">\n                  {props.course.discount ? `(${props.course.price})` : \"\"}\n                </span>\n              </h1>\n              <Popconfirm\n                placement=\"top\"\n                title=\"Are you sure to enroll this course?\"\n                onConfirm={enroll}\n              >\n                <Button\n                  size=\"large\"\n                  danger\n                  className=\"w-full\"\n                  type=\"primary\"\n                  loading={enrollLoading}\n                >\n                  Enroll now\n                </Button>\n              </Popconfirm>\n            </>\n          )}\n          <Divider />\n          <div>\n            <h3 className=\"mb-4\">\n              <b>This course includes:</b>\n            </h3>\n            <p className=\"flex items-center\">\n              <SnippetsOutlined className=\"mr-2\" />{\" \"}\n              {props.course.contents?.length || 0} articles\n            </p>\n            <p className=\"flex items-center\">\n              <BookOutlined className=\"mr-2\" />{\" \"}\n              {FormatUtils.formatSeconds(\n                props.course.contents?.reduce(\n                  (total, curr) => total + curr.duration,\n                  0\n                )\n              )}{\" \"}\n              video time\n            </p>\n            <p className=\"flex items-center\">\n              <ClockCircleOutlined className=\"mr-2\" /> Full lifetime access\n            </p>\n            <p className=\"flex items-center\">\n              <MobileOutlined className=\"mr-2\" /> Access on mobile and TV\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useCallback } from \"react\";\nimport { RouteComponentProps } from \"react-router\";\nimport { FdmLoading } from \"../../shared/components/FdmLoading\";\nimport { useQuery } from \"../../shared/hooks/useQuery.hook\";\nimport { CourseDetail } from \"./CourseDetail\";\nimport { CourseService } from \"./CourseService\";\n\nexport function CourseDetailPage(props: RouteComponentProps) {\n  const courseId = Number((props.match.params as any).courseId);\n  const courseResponse = useQuery(\n    useCallback(() => {\n      return CourseService.getDetail(courseId);\n    }, [courseId])\n  );\n\n  if (!courseResponse.data) {\n    return (\n      <div className=\"flex justify-center items-center\">\n        <FdmLoading />\n      </div>\n    );\n  }\n\n  return (\n    <CourseDetail\n      course={courseResponse.data}\n      onRefreshNeeded={courseResponse.reFetch}\n    />\n  );\n}\n","import React, { useCallback } from \"react\";\nimport { RouteComponentProps } from \"react-router\";\nimport { CourseList } from \"./CourseList\";\nimport { CourseService } from \"./CourseService\";\nimport { ICourseSearchRequest } from \"./types/CourseSearchRequest\";\n\nexport function CourseListOfCreator(props: RouteComponentProps) {\n  const creatorId = Number((props.match.params as any).creatorId);\n  const fetchSource = useCallback(\n    (req: ICourseSearchRequest) => {\n      return CourseService.search({ ...req, creatorId });\n    },\n    [creatorId]\n  );\n\n  return (\n    <div>\n      <CourseList fetchSource={fetchSource} />\n    </div>\n  );\n}\n","import React, { useCallback } from \"react\";\nimport { RouteComponentProps } from \"react-router\";\nimport { CourseList } from \"./CourseList\";\nimport { CourseService } from \"./CourseService\";\nimport { useFdmStore } from \"../../shared/store/useFdmStore\";\nimport { ICourseSearchRequest } from \"./types/CourseSearchRequest\";\n\nexport function CourseListPage(props: RouteComponentProps) {\n  const categoryId = Number((props.match.params as any).categoryId);\n  const [globalState, dispatch] = useFdmStore();\n\n  const fetchSource = useCallback(\n    (req: ICourseSearchRequest) => {\n      dispatch(\"SET_SEARCH_TERM\", req.searchTerm || \"\");\n      return CourseService.search(req);\n    },\n    [dispatch]\n  );\n\n  return (\n    <div>\n      <CourseList\n        categoryId={categoryId}\n        fetchSource={fetchSource}\n        searchTerm={globalState.searchTerm}\n      />\n    </div>\n  );\n}\n","import { Button, Result } from \"antd\";\nimport React from \"react\";\nimport { RouteComponentProps, useHistory } from \"react-router\";\n\nexport function SaveCourseResult(props: RouteComponentProps) {\n  const courseId = (props.match.params as any)?.courseId;\n  const history = useHistory();\n  return (\n    <Result\n      status=\"success\"\n      title=\"Save course success\"\n      subTitle=\"Your course is successfully saved, and ready to show\"\n      extra={[\n        <Button\n          type=\"primary\"\n          shape=\"round\"\n          onClick={() => history.push(`/courses/detail/${courseId}`)}\n        >\n          View course\n        </Button>,\n      ]}\n    />\n  );\n}\n","import React from 'react';\nimport { Route, Switch } from 'react-router';\nimport { CourseDetailPage } from './CourseDetailPage';\nimport { CourseListOfCreator } from './CourseListOfCreator';\nimport { CourseListPage } from './CourseListPage';\nimport { SaveCourseResult } from './SaveCourseResult';\n\nexport function CoursePage() {\n  return (\n    <Switch>\n      <Route path=\"/courses/detail/:courseId\" component={CourseDetailPage} />\n      <Route path=\"/courses/creator/:creatorId\" component={CourseListOfCreator} />\n      <Route path=\"/courses/save-result/:courseId\" component={SaveCourseResult} />\n      <Route path=\"/courses/:categoryId\" component={CourseListPage} />\n    </Switch>\n  )\n}","import { BookFilled } from \"@ant-design/icons\";\nimport React, { useCallback } from \"react\";\nimport { CourseList } from \"../course/CourseList\";\nimport { CourseService } from \"../course/CourseService\";\nimport { ICourseSearchRequest } from \"../course/types/CourseSearchRequest\";\n\nexport function EnrollmentPage() {\n  const fetchSource = useCallback((request: ICourseSearchRequest) => {\n    return CourseService.search({\n      ...request,\n      onlyEnrollment: true,\n    });\n  }, []);\n  return (\n    <div>\n      <h1 className=\"text-3xl text-blue-400 flex items-center\">\n        <BookFilled className=\"mr-2\" /> Your enrollment\n      </h1>\n      <CourseList fetchSource={fetchSource} />\n    </div>\n  );\n}\n","export enum CourseTopType {\n  VIEW = 'totalView',\n  NEW = 'createdDate'\n}","import React, { useCallback } from \"react\";\nimport {\n  YoutubeOutlined,\n  SafetyOutlined,\n  ClockCircleOutlined,\n  CodeOutlined,\n  CopyOutlined,\n  TeamOutlined,\n} from \"@ant-design/icons\";\nimport { useQuery } from \"../../shared/hooks/useQuery.hook\";\nimport { CourseService } from \"../course/CourseService\";\nimport { CourseCard } from \"../course/CourseCard\";\nimport { CategoryService } from \"../category/CategoryService\";\nimport { ICategoryTotalEnrollment } from \"../../shared/entities/ICategoryTotalEnrollment\";\nimport { NavLink } from \"react-router-dom\";\nimport Slider from \"react-slick\";\nimport { CourseTopType } from \"../course/enums/CourseTopType\";\nimport { FdmLoading } from \"../../shared/components/FdmLoading\";\n\nconst features = [\n  {\n    icon: <YoutubeOutlined />,\n    title: \"1,000+ Courses\",\n    subTitle: \"Explore a wide range of skills.\",\n  },\n  {\n    icon: <SafetyOutlined />,\n    title: \"By Industry Experts\",\n    subTitle: \"Professional development from the best people.\",\n  },\n  {\n    icon: <ClockCircleOutlined />,\n    title: \"Unlimited Access\",\n    subTitle: \"Unlock Library and learn any topic with one subscription.\",\n  },\n  {\n    icon: <CodeOutlined />,\n    title: \"Lesson Source Files\",\n    subTitle: \"Explore a wide range of skills.\",\n  },\n  {\n    icon: <CopyOutlined />,\n    title: \"Printed Diploma\",\n    subTitle: \"Professional development from the best people.\",\n  },\n  {\n    icon: <TeamOutlined />,\n    title: \"Premium Support\",\n    subTitle: \"Unlock Library and learn any topic with one subscription.\",\n  },\n];\n\nconst sliderSettings = {\n  dots: true,\n  infinite: true,\n  speed: 500,\n  slidesToShow: 5,\n  slidesToScroll: 5,\n};\n\nexport function HomePage() {\n  const topCoursesOfWeek = useQuery(CourseService.topOfWeeks);\n  const topCategoriesOfWeek = useQuery(CategoryService.topOfWeeks);\n  const top10Viewed = useQuery(\n    useCallback(() => CourseService.top(CourseTopType.VIEW), [])\n  );\n  const top10New = useQuery(\n    useCallback(() => CourseService.top(CourseTopType.NEW), [])\n  );\n  return (\n    <div>\n      <div>\n        <h1 className=\"text-center text-blue-400 text-3xl\">\n          Welcome to Fademy\n        </h1>\n        <p className=\"text-center text-xl text-gray-500\">\n          What other students turned professionals have to say about us after\n          learning with us and reaching their goals.\n        </p>\n        <div className=\"flex flex-wrap mt-12\">\n          {features.map((feature, idx) => (\n            <div key={idx} className=\"flex items-center w-1/3 mb-2\">\n              <div className=\"rounded-full h-16 w-16 flex items-center justify-center bg-blue-400 text-white text-2xl mb-4\">\n                {feature.icon}\n              </div>\n              <div className=\"ml-2 flex flex-col justify-center\">\n                <h1 className=\"text-gray-500\">\n                  <b>{feature.title}</b>\n                </h1>\n                <p className=\"text-gray-500\">{feature.subTitle}</p>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div>\n        <h1 className=\"text-center text-blue-400 text-3xl mt-16 mb-8\">\n          Top courses of week\n        </h1>\n        {!topCoursesOfWeek.data ? (\n          <FdmLoading />\n        ) : (\n          <Slider {...sliderSettings} >\n            {[...(Array(5).keys() as any)].map((_, idx) => (\n              <div className=\"p-2\">\n                <CourseCard\n                  key={idx}\n                  className=\"w-full\"\n                  course={\n                    topCoursesOfWeek.data ? topCoursesOfWeek.data[idx] : {}\n                  }\n                  loading={!topCoursesOfWeek.data}\n                />\n              </div>\n            ))}\n          </Slider>\n        )}\n      </div>\n\n      <div>\n        <h1 className=\"text-center text-blue-400 text-3xl mt-16 mb-8\">\n          Top categories of week\n        </h1>\n        <div className=\"flex flex-wrap\">\n          {!topCategoriesOfWeek.data ? (\n            <div className=\"py-5 flex justify-center items-center w-full\">\n              <FdmLoading />\n            </div>\n          ) : (\n            topCategoriesOfWeek.data.map(\n              (tc: ICategoryTotalEnrollment, idx: number) => (\n                <div className=\"w-1/5 p-2\">\n                  <NavLink\n                    key={idx}\n                    to={`/courses/${tc.categoryId}`}\n                    className=\"text-gray-500 block border rounded-lg p-5 cursor-pointer hover:shadow\"\n                  >\n                    {tc.category.name} ({tc.totalEnrollment})\n                  </NavLink>\n                </div>\n              )\n            )\n          )}\n        </div>\n      </div>\n\n      <div>\n        <h1 className=\"text-center text-blue-400 text-3xl mt-16 mb-8\">\n          Most viewed courses\n        </h1>\n        {!top10Viewed.data ? (\n          <FdmLoading />\n        ) : (\n          <Slider {...sliderSettings}>\n            {[...(Array(10).keys() as any)].map((_, idx) => (\n              <div className=\"p-2\">\n                <CourseCard\n                  key={idx}\n                  className=\"w-full\"\n                  course={top10Viewed.data ? top10Viewed.data[idx] : {}}\n                  loading={!top10Viewed.data}\n                />\n              </div>\n            ))}\n          </Slider>\n        )}\n      </div>\n\n      <div>\n        <h1 className=\"text-center text-blue-400 text-3xl mt-16 mb-8\">\n          Newest courses\n        </h1>\n        {!top10New.data ? (\n          <FdmLoading />\n        ) : (\n          <Slider {...sliderSettings}>\n            {[...(Array(10).keys() as any)].map((_, idx) => (\n              <div className=\"p-2\">\n                <CourseCard\n                  key={idx}\n                  className=\"w-full\"\n                  course={top10New.data ? top10New.data[idx] : {}}\n                  loading={!top10New.data}\n                />\n              </div>\n            ))}\n          </Slider>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { Tabs } from \"antd\";\nimport React from \"react\";\nimport { Route, RouteComponentProps, Switch } from \"react-router\";\nimport { ChangePasswordForm } from \"./ChangePasswordForm\";\nimport { ProfileEditForm } from \"./ProfileEditForm\";\n\nenum ProfileTabs {\n  PROFILE = \"/profile\",\n  CHANGE_PASSWORD = \"/profile/change-password\",\n}\n\nexport function ProfilePage(props: RouteComponentProps) {\n  return (\n    <>\n      <div className=\"flex justify-center items-center\">\n        <div\n          className=\"px-10 py-5 rounded-lg shadow\"\n          style={{ width: \"400px\" }}\n        >\n          <Tabs\n            defaultActiveKey={props.location.pathname}\n            onChange={(pathname) =>\n              props.history.push(pathname)\n            }\n          >\n            <Tabs.TabPane tab=\"Profile\" key={ProfileTabs.PROFILE} />\n            <Tabs.TabPane tab=\"Change password\" key={ProfileTabs.CHANGE_PASSWORD} />\n          </Tabs>\n          <Switch>\n            <Route exact path=\"/profile\" component={ProfileEditForm} />\n            <Route path=\"/profile/change-password\" component={ChangePasswordForm} />\n          </Switch>\n        </div>\n      </div>\n    </>\n  );\n}\n","import { Button, Form, Input, notification } from \"antd\";\nimport React, { useCallback, useState } from \"react\";\nimport { AuthService } from \"../auth/AuthService\";\nimport { UserFormRules } from \"../user/UserFormRules\";\n\nexport function ChangePasswordForm() {\n  const [form] = Form.useForm();\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const submit = useCallback(async (values: any) => {\n    setSubmitLoading(true);\n    const success = await AuthService.changePassword(\n      values.oldPassword,\n      values.password\n    );\n    if (success) {\n      form.resetFields();\n      notification.success({\n        message: \"Success\",\n        description: \"Update password success\",\n      });\n    }\n    setSubmitLoading(false);\n  }, [form]);\n\n  return (\n    <Form form={form} onFinish={submit}>\n      <label className=\"block mb-2\">\n        Old password <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"oldPassword\" rules={UserFormRules.password}>\n        <Input placeholder=\"Old password...\" type=\"password\" />\n      </Form.Item>\n      <label className=\"block mb-2\">\n        New password <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"password\" rules={UserFormRules.password}>\n        <Input placeholder=\"New password...\" type=\"password\" />\n      </Form.Item>\n      <label className=\"block mb-2\">\n        Confirm new password <b className=\"text-red-400\">*</b>\n      </label>\n      <Form.Item name=\"confirmPassword\" rules={UserFormRules.confirmPassword}>\n        <Input placeholder=\"Confirm new password...\" type=\"password\" />\n      </Form.Item>\n      <Form.Item>\n        <Button\n          type=\"primary\"\n          shape=\"round\"\n          className=\"w-full\"\n          htmlType=\"submit\"\n          loading={submitLoading}\n        >\n          Submit\n        </Button>\n      </Form.Item>\n    </Form>\n  );\n}\n","import React, { useCallback, useState } from 'react';\nimport { Button } from 'antd';\n\ninterface IProfileActionButtonGroupProps {\n  onCancel: any;\n  onEdit: any;\n  onSave: any;\n  edit: boolean;\n  saveBtnTitle?: string;\n  editBtnTitle?: string;\n}\n\n\nexport function ProfileActionButtonGroup(props: IProfileActionButtonGroupProps) {\n  const [saveLoading, setSaveLoading] = useState(false);\n  const { onSave } = props;\n  const save = useCallback(async () => {\n    setSaveLoading(true);\n    await onSave();\n    setSaveLoading(false);\n  }, [onSave]);\n\n  return props.edit ? (\n    <div>\n      <Button\n        type=\"primary\"\n        shape=\"round\"\n        className=\"mb-2 w-full\"\n        loading={saveLoading}\n        onClick={save}\n      >\n        {props.saveBtnTitle ? props.saveBtnTitle : \"Save\"}\n      </Button>\n      <Button\n        className=\"w-full\"\n        shape=\"round\"\n        onClick={() => props.onCancel(false)}\n      >\n        Cancel\n      </Button>\n    </div>\n  ) : (\n    <Button\n      className=\"w-full\"\n      type=\"primary\"\n      shape=\"round\"\n      onClick={() => props.onEdit(true)}\n    >\n      {props.editBtnTitle ? props.editBtnTitle : \"Edit\"}\n    </Button>\n  );\n}","import React, { useCallback, useMemo, useState } from \"react\";\nimport { Button, Form, Input, notification } from \"antd\";\nimport moment from \"moment\";\nimport { IUser } from \"../../shared/entities/IUser\";\nimport { NotificationUtils } from \"../../shared/utils/NotificationUtils\";\nimport { RegisterFormRules } from \"../auth/RegisterFormRules\";\nimport { useOtpSender } from \"../otp/useOtpSender\";\nimport { UserService } from \"../user/UserService\";\nimport { ProfileActionButtonGroup } from \"./ProfileActionButtonGroup\";\n\ninterface IEmailEditFormProps {\n  authedUser: IUser;\n  onSaveSuccess: (email: string) => any;\n}\n\nexport function EmailEditForm(props: IEmailEditFormProps) {\n  const [form] = Form.useForm();\n  const [edit, setEdit] = useState(false);\n  const [saveLoading, setSaveLoading] = useState(false);\n  const [email, setEmail] = useState<any>();\n\n  const getEmail = useCallback(async () => {\n    let email;\n    try {\n      const values = await form.validateFields();\n      email = values.email;\n    } catch {\n      return false;\n    }\n    return email;\n  }, [form]);\n\n  const { authedUser, onSaveSuccess } = props;\n  const otpSender = useOtpSender();\n  const { sendOtp: _sendOtp, SendOtpButton } = otpSender;\n  const sendOtp = useCallback(async () => {\n    const email = await getEmail();\n    if (!email) return;\n    await _sendOtp({ ...authedUser, email } as any);\n    setEmail(email);\n  }, [getEmail, _sendOtp, authedUser]);\n\n  const remainDaysToUpdateEmail = useMemo(() => {\n    if (authedUser && authedUser.updatedEmailDate) {\n      return 30 - moment().diff(moment(authedUser?.updatedEmailDate), \"days\");\n    }\n    return -1;\n  }, [authedUser]);\n\n  const saveEmail = useCallback(\n    async (payload: any) => {\n      setSaveLoading(true);\n      try {\n        await UserService.updateEmail(payload);\n        setEdit(false);\n        onSaveSuccess(payload.email);\n        notification.success({\n          message: \"Success\",\n          description: \"Update email success\",\n        });\n      } catch (err) {\n        console.error(err);\n        NotificationUtils.error(err.message);\n      }\n      setSaveLoading(false);\n    },\n    [onSaveSuccess]\n  );\n\n  return (\n    <Form\n      form={form}\n      initialValues={{ email: authedUser.email }}\n      onFinish={saveEmail}\n    >\n      <label className=\"block mb-2\">\n        E-mail {edit && <b className=\"text-red-400\">*</b>}\n      </label>\n      <Form.Item name=\"email\" rules={RegisterFormRules.email}>\n        <Input disabled={!edit} placeholder=\"E-mail...\" />\n      </Form.Item>\n      {!email && remainDaysToUpdateEmail < 0 && (\n        <Form.Item>\n          <ProfileActionButtonGroup\n            edit={edit}\n            saveBtnTitle=\"Continue\"\n            editBtnTitle=\"Edit email\"\n            onSave={sendOtp}\n            onCancel={() => setEdit(false)}\n            onEdit={() => setEdit(true)}\n          />\n        </Form.Item>\n      )}\n      {remainDaysToUpdateEmail > 0 && (\n        <p className=\"my-0 text-red-400\">\n          Please wait for {remainDaysToUpdateEmail} days to update your email\n        </p>\n      )}\n      {!!email && (\n        <>\n          <label className=\"block mb-2\">\n            OTP <b className=\"text-red-400\">*</b>\n          </label>\n          <Form.Item name=\"otp\" rules={RegisterFormRules.otp}>\n            <Input placeholder=\"OTP...\" />\n          </Form.Item>\n          <Form.Item>\n            <SendOtpButton\n              className=\"w-full mb-4\"\n              onClick={() =>\n                otpSender.sendOtp({\n                  ...authedUser,\n                  email,\n                } as any)\n              }\n            />\n            <Button\n              type=\"primary\"\n              shape=\"round\"\n              className=\"w-full\"\n              htmlType=\"submit\"\n              loading={saveLoading}\n            >\n              Save new email\n            </Button>\n          </Form.Item>\n        </>\n      )}\n    </Form>\n  );\n}\n","import { Form, Input, notification } from \"antd\";\nimport React, { useCallback, useState } from \"react\";\nimport { IUser } from \"../../shared/entities/IUser\";\nimport { NotificationUtils } from \"../../shared/utils/NotificationUtils\";\nimport { UserFormRules } from \"../user/UserFormRules\";\nimport { UserService } from \"../user/UserService\";\nimport { ProfileActionButtonGroup } from \"./ProfileActionButtonGroup\";\n\ninterface IFirstLastNameEditFormProps {\n  authedUser: IUser;\n  onSaveSuccess: (payload: any) => any;\n}\n\nexport function FirstLastNameEditForm(props: IFirstLastNameEditFormProps) {\n  const [form] = Form.useForm();\n  const [edit, setEdit] = useState(false);\n  \n  const { authedUser, onSaveSuccess } = props;\n  const saveFlName = useCallback(async () => {\n    let payload: any;\n    try {\n      payload = await form.validateFields();\n    } catch {\n      return;\n    }\n\n    try {\n      await UserService.updateFirstLastName(payload);\n      setEdit(false);\n      onSaveSuccess(payload);\n      notification.success({\n        message: \"Success\",\n        description: \"Update first name, last name success\",\n      });\n    } catch (err) {\n      console.error(err);\n      NotificationUtils.error(err.message);\n    }\n  }, [form, onSaveSuccess]);\n\n  return (\n    <Form\n      form={form}\n      initialValues={{\n        firstName: authedUser.firstName,\n        lastName: authedUser.lastName,\n      }}\n    >\n      <label className=\"block mb-2\">\n        First name {edit && <b className=\"text-red-400\">*</b>}\n      </label>\n      <Form.Item name=\"firstName\" rules={UserFormRules.firstName}>\n        <Input disabled={!edit} placeholder=\"First name...\" />\n      </Form.Item>\n      <label className=\"block mb-2\">\n        Last name {edit && <b className=\"text-red-400\">*</b>}\n      </label>\n      <Form.Item name=\"lastName\" rules={UserFormRules.lastName}>\n        <Input disabled={!edit} placeholder=\"Last name...\" />\n      </Form.Item>\n      <Form.Item>\n        <ProfileActionButtonGroup\n          edit={edit}\n          editBtnTitle=\"Edit first & last name\"\n          onSave={() => saveFlName()}\n          onCancel={() => setEdit(false)}\n          onEdit={() => setEdit(true)}\n        />\n      </Form.Item>\n    </Form>\n  );\n}\n","import { Form, Input, notification } from \"antd\";\nimport React, { useCallback, useState } from \"react\";\nimport { IUser } from \"../../shared/entities/IUser\";\nimport { NotificationUtils } from \"../../shared/utils/NotificationUtils\";\nimport { UserFormRules } from \"../user/UserFormRules\";\nimport { UserService } from \"../user/UserService\";\nimport { ProfileActionButtonGroup } from \"./ProfileActionButtonGroup\";\n\ninterface ITeacherProfileEditFormProps {\n  authedUser: IUser;\n  onSaveSuccess: (payload: any) => any;\n}\n\nexport function TeacherProfileEditForm(props: ITeacherProfileEditFormProps) {\n  const [form] = Form.useForm();\n  const [edit, setEdit] = useState(false);\n\n  const { authedUser, onSaveSuccess } = props;\n  const saveTeacherProfile = useCallback(async () => {\n    let payload: any;\n    try {\n      payload = await form.validateFields();\n    } catch {\n      return;\n    }\n\n    try {\n      await UserService.updateTeacherProfile(payload);\n      setEdit(false);\n      onSaveSuccess(payload);\n      notification.success({\n        message: \"Success\",\n        description: \"Update your teacher profile success\",\n      });\n    } catch (err) {\n      console.error(err);\n      NotificationUtils.error(err.message);\n    }\n  }, [form, onSaveSuccess]);\n\n  return (\n    <Form\n      form={form}\n      initialValues={{\n        bio: authedUser.bio,\n        introduction: authedUser.introduction,\n      }}\n    >\n      <label className=\"block mb-2\">Bio</label>\n      <Form.Item name=\"bio\" rules={UserFormRules.bio}>\n        <Input disabled={!edit} placeholder=\"Bio...\" />\n      </Form.Item>\n      <label className=\"block mb-2\">Introduction</label>\n      <Form.Item name=\"introduction\" rules={UserFormRules.introduction}>\n        <Input.TextArea rows={5} disabled={!edit} placeholder=\"Introduction...\" />\n      </Form.Item>\n      <Form.Item>\n        <ProfileActionButtonGroup\n          edit={edit}\n          editBtnTitle=\"Edit your teacher profile\"\n          onSave={() => saveTeacherProfile()}\n          onCancel={() => setEdit(false)}\n          onEdit={() => setEdit(true)}\n        />\n      </Form.Item>\n    </Form>\n  );\n}\n","import { Divider, Form, Input } from \"antd\";\nimport React, { useCallback } from \"react\";\nimport { RouteComponentProps } from \"react-router\";\nimport { FdmLoading } from \"../../shared/components/FdmLoading\";\nimport { UserRole } from \"../../shared/enums/UserRole\";\nimport { useAuthedUser } from \"../../shared/hooks/useAuthedUser\";\nimport { useFdmStore } from \"../../shared/store/useFdmStore\";\nimport { EmailEditForm } from \"./EmailEditForm\";\nimport { FirstLastNameEditForm } from \"./FirstLastNameEditForm\";\nimport { TeacherProfileEditForm } from \"./TeacherProfileEditForm\";\n\nexport function ProfileEditForm(props: RouteComponentProps) {\n  const store = useFdmStore();\n  const dispatch = store[1];\n  const { authedUser, loading } = useAuthedUser();\n\n  const onSaveEmailSuccessHandler = useCallback(\n    (email: string) => {\n      dispatch(\"SET_USER\", {\n        ...authedUser,\n        email,\n        updatedEmailDate: new Date(),\n      });\n    },\n    [dispatch, authedUser]\n  );\n\n  const onSaveFlNameSuccessHandler = useCallback(\n    (payload: any) => {\n      dispatch(\"SET_USER\", { ...authedUser, ...payload });\n    },\n    [dispatch, authedUser]\n  );\n\n  const onSaveTeacherProfileSuccessHandler = useCallback(\n    (payload: any) => {\n      dispatch(\"SET_USER\", { ...authedUser, ...payload });\n    },\n    [dispatch, authedUser]\n  );\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center\">\n        <FdmLoading />\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <Form.Item>\n        <label className=\"block mb-2\">Username</label>\n        <Input disabled defaultValue={authedUser?.username} />\n      </Form.Item>\n      <Divider />\n      <EmailEditForm\n        authedUser={authedUser}\n        onSaveSuccess={onSaveEmailSuccessHandler}\n      />\n      <Divider />\n      <FirstLastNameEditForm\n        authedUser={authedUser}\n        onSaveSuccess={onSaveFlNameSuccessHandler}\n      />\n      {authedUser.role === UserRole.TEACHER && (\n        <>\n          <Divider />\n          <TeacherProfileEditForm\n            authedUser={authedUser}\n            onSaveSuccess={onSaveTeacherProfileSuccessHandler}\n          />\n        </>\n      )}\n    </div>\n  );\n}\n","export enum FileType {\n  VIDEO = 'VIDEO',\n  IMAGE = 'IMAGE',\n}","export enum StdResponseCode {\n  SUCCESS = 1,\n  FAILED = 2,\n}\n","import { notification } from \"antd\";\nimport React from \"react\";\nimport { FilePond } from \"react-filepond\";\nimport { ApiEndpoint } from \"../../shared/constants/ApiEndpoint\";\nimport { FileType } from \"../../shared/enums/FileType\";\nimport { StdResponseCode } from \"../../shared/enums/StdResponseCode\";\nimport { AuthService } from \"../auth/AuthService\";\n\ninterface IUploaderProps {\n  fileType: FileType;\n  state?: string;\n  onUploadSuccess?: (filePath: string) => any;\n  pondRef?: any;\n  [key: string]: any;\n}\n\nconst configs = {\n  [FileType.IMAGE]: {\n    maxSize: \"5MB\", // 5MB\n    validMimeTypes: [\n      \"image/gif\",\n      \"image/jpeg\",\n      \"image/png\",\n      \"image/svg+xml\",\n      \"image/webp\",\n    ],\n  },\n  [FileType.VIDEO]: {\n    maxSize: \"500MB\", // 500MB\n    validMimeTypes: [\"video/x-flv\", \"video/mp4\", \"video/3gpp\"],\n  },\n};\n\nexport function Uploader(props: IUploaderProps) {\n  const config = configs[props.fileType];\n  return (\n    <FilePond\n      name=\"file\"\n      maxFiles={1}\n      server={{\n        url: ApiEndpoint.uploader.upload,\n        load: (source, load) => {\n          const myRequest = new Request(source);\n          fetch(myRequest).then(function(response) {\n            response.blob().then(function(myBlob) {\n              load(myBlob)\n            });\n          });         \n      },\n        process: {\n          headers: {\n            'x-file-type': props.fileType,\n            'x-upload-state': props.state,\n            'Authorization': `Bearer ${AuthService.accessToken}`\n          },\n          onload: (raw: any) => {\n            const response = JSON.parse(raw);\n            if (response.code === StdResponseCode.SUCCESS) {\n              props.onUploadSuccess && props.onUploadSuccess(response.result);\n            } else {\n              notification.error({\n                message: 'Error',\n                description: 'Upload failed, please try again'\n              })\n            }\n          }\n        } as any\n      }}\n      ref={(ref) => {\n        if (props.pondRef) {\n          props.pondRef.current = ref;\n        }\n      }}\n      dropValidation={true}\n      instantUpload={false}\n      acceptedFileTypes={config.validMimeTypes}\n      maxFileSize={config.maxSize}\n      {...props}\n    />\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { stateToHTML } from 'draft-js-export-html';\nimport { EditorState, convertFromHTML, ContentState } from 'draft-js';\nimport { Editor } from \"react-draft-wysiwyg\";\n\ninterface IFdmEditorProps {\n  editorRef?: any;\n  html?: string;\n}\n\nexport function FdmEditor(props: IFdmEditorProps) {\n  const [editorState, setEditorState] = useState<any>();\n  const { html } = props;\n  useEffect(() => {\n    if (!!html) {\n      const blocksFromHTML = convertFromHTML(html || '');\n      const state = ContentState.createFromBlockArray(\n        blocksFromHTML.contentBlocks,\n        blocksFromHTML.entityMap,\n      );\n      setEditorState(EditorState.createWithContent(state));\n    } else {\n      setEditorState(EditorState.createEmpty());\n    }\n  }, [html]);\n\n  const { editorRef } = props;\n  useEffect(() => {\n    if (editorRef) {\n      editorRef.current = {\n        getHtmlContent() {\n          return stateToHTML(editorState?.getCurrentContent());\n        }\n      }\n    }\n  }, [editorRef, editorState]);\n\n  return (\n    <Editor wrapperClassName=\"border\" editorClassName=\"px-4\" editorState={editorState} onEditorStateChange={setEditorState} />\n  );\n}\n","import { Rule } from \"rc-field-form/lib/interface\";\n\ninterface IContentEditFormRules {\n  [key: string]: Rule[]\n}\n\nexport const ContentEditFormRules: IContentEditFormRules = {\n  title: [\n    { required: true, message: 'Title is required' },\n    { min: 4, message: 'Title is too short' },\n    { max: 255, message: 'Title is too long' }\n  ],\n  description: [\n    { required: true, message: 'Description is required' },\n  ],\n}","import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { Checkbox, Form, Input, InputNumber, notification } from \"antd\";\nimport { IContent } from \"../../shared/entities/IContent\";\nimport { Uploader } from \"../uploader/Uploader\";\nimport { FileType } from \"../../shared/enums/FileType\";\nimport { FdmEditor } from \"../../shared/components/FdmEditor\";\nimport { ContentEditFormRules } from \"./ContentEditFormRules\";\nimport { ASSETS_URL } from \"../../shared/constants/constants\";\n\ninterface IContentEditFormProps {\n  content?: IContent;\n  formRef?: any;\n}\n\nexport function ContentEditForm(props: IContentEditFormProps) {\n  const [form] = Form.useForm();\n  const { formRef, content: propsContent } = props;\n  const callbackRef = useRef<any>();\n  const videoRef = useRef<any>();\n  const editorRef = useRef<any>();\n\n  const validate = useCallback(async () => {\n    let content;\n    try {\n      content = await form.validateFields();\n    } catch {\n      return false;\n    }\n\n    if (!videoRef.current.getFile()) {\n      notification.error({\n        message: \"Error\",\n        description: `Content ${content.order} must have video`,\n      });\n      return false;\n    }\n\n    return content;\n  }, [form]);\n\n  const startProcess = useCallback(async () => {\n    const content = await validate();\n    if (!!videoRef.current.getFile()) {\n      videoRef.current.processFile();\n    }\n    return content;\n  }, [validate]);\n\n  const onUpLoadSuccessHandler = useCallback((result) => {\n    callbackRef.current(result.filePath);\n  }, []);\n\n  useEffect(() => {\n    if (formRef) {\n      formRef.current = {\n        validate,\n        getContent() {\n          return new Promise(async (resolve, reject) => {\n            let content = await startProcess();\n            if (!!content) {\n              callbackRef.current = (videoPath: string) => {\n                content = {\n                  ...content,\n                  description: editorRef.current.getHtmlContent(),\n                  videoPath,\n                };\n                if (propsContent) {\n                  content.id = propsContent.id;\n                }\n                resolve(content);\n              };\n            } else {\n              reject();\n            }\n          });\n        },\n      };\n    }\n  }, [formRef, startProcess, validate, propsContent]);\n\n  const [videos] = useState(() => {\n    if (propsContent && propsContent.videoPath) {\n      return [\n        {\n          source: `${ASSETS_URL}/${propsContent.videoPath}`,\n          options: { type: \"local\" },\n        },\n      ];\n    }\n    return null;\n  });\n\n\n  let uploaderProps: any = {};\n  if (propsContent && propsContent.videoPath) {\n    uploaderProps.files = videos;\n  }\n\n  return (\n    <>\n      <Form form={form} initialValues={props.content}>\n        <div className=\"flex\">\n          <div className=\"w-1/5 pr-2\">\n            <label className=\"block mb-2\">Order</label>\n            <Form.Item name=\"order\">\n              <InputNumber min={1} placeholder=\"Order...\" className=\"w-fulli\" />\n            </Form.Item>\n          </div>\n          <div className=\"w-4/5\">\n            <label className=\"block mb-2\">\n              Title <b className=\"text-red-400\">*</b>\n            </label>\n            <Form.Item name=\"title\" rules={ContentEditFormRules.title}>\n              <Input placeholder=\"Title...\" />\n            </Form.Item>\n          </div>\n        </div>\n        <Form.Item name=\"preview\" valuePropName=\"checked\">\n          <Checkbox>Preview</Checkbox>\n        </Form.Item>\n        <label className=\"block mb-2\">Description</label>\n        <Form.Item name=\"description\">\n          <FdmEditor editorRef={editorRef} html={props.content?.description} />\n        </Form.Item>\n      </Form>\n      <label className=\"block mb-2\">\n        Video <b className=\"text-red-400\">*</b>\n      </label>\n      <Uploader\n        fileType={FileType.VIDEO}\n        state=\"videoPath\"\n        pondRef={videoRef}\n        onUploadSuccess={onUpLoadSuccessHandler}\n        {...uploaderProps}\n      />\n    </>\n  );\n}\n","import { Rule } from \"rc-field-form/lib/interface\";\n\ninterface ICourseEditFormRules {\n  [key: string]: Rule[]\n}\n\nexport const CourseEditFormRules: ICourseEditFormRules = {\n  categoryId: [\n    { required: true, message: 'Category is required' }\n  ],\n  title: [\n    { required: true, message: 'Title is required' },\n    { min: 8, message: 'Title is too short' },\n    { max: 255, message: 'Title is too long' }\n  ],\n  subDescription: [\n    { required: true, message: 'Sub-description is required' },\n    { min: 8, message: 'Sub-description is too short' }\n  ],\n  price: [\n    { required: true, message: 'Price is required' },\n    { type: 'number', min: 0, max: 500, message: 'Invalid price' }\n  ],\n  discount: [\n    { required: true, message: 'Discount is required' },\n    { type: 'number', min: 0, max: 500, message: 'Invalid discount' },\n    ({ getFieldValue }) => ({\n      async validator(_, discount: number) {\n        const price = getFieldValue('price') || 0;\n        if (price < discount) {\n          throw new Error(\"Invalid discount\");\n        }\n      },\n      validateTrigger: 'submit'\n    })\n  ]\n}","import React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport {\n  Button,\n  Checkbox,\n  Divider,\n  Form,\n  Input,\n  InputNumber,\n  notification,\n  Tooltip,\n} from \"antd\";\nimport { useForm } from \"antd/lib/form/Form\";\nimport { ICourse } from \"../../shared/entities/ICourse\";\nimport { FileType } from \"../../shared/enums/FileType\";\nimport { CategorySelect } from \"../category/CategorySelect\";\nimport { Uploader } from \"../uploader/Uploader\";\nimport { IContent } from \"../../shared/entities/IContent\";\nimport { ContentEditForm } from \"../content/ContentEditForm\";\nimport { CloseCircleFilled, PlusCircleOutlined } from \"@ant-design/icons\";\nimport { FdmEditor } from \"../../shared/components/FdmEditor\";\nimport { CourseEditFormRules } from \"./CourseEditFormRules\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { CourseService } from \"./CourseService\";\nimport { NotificationUtils } from \"../../shared/utils/NotificationUtils\";\nimport { ASSETS_URL } from \"../../shared/constants/constants\";\nimport { useHistory } from \"react-router\";\n\ninterface ICourseEditFormProps {\n  course?: ICourse;\n}\n\nexport function CourseEditForm(props: ICourseEditFormProps) {\n  const { course: propsCourse } = props;\n  const isUpdate = !!propsCourse;\n  const history = useHistory();\n  const [form] = useForm();\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const [contents, setContents] = useState<IContent[]>([]);\n  const addContent = useCallback(() => {\n    setContents([\n      ...contents,\n      {\n        preview: false,\n        order: contents.length + 1,\n        key: uuidv4(),\n        formRef: { current: null },\n      } as any,\n    ]);\n  }, [contents]);\n\n  useEffect(() => {\n    if (propsCourse && propsCourse.contents) {\n      setContents(propsCourse.contents.map(content => ({\n        ...content,\n        key: uuidv4(),\n        formRef: { current: null }\n      })));\n    }\n  }, [propsCourse]);\n\n  const avatarRef = useRef<any>();\n  const coverRef = useRef<any>();\n  const startProcess = useCallback(async () => {\n    try {\n      await form.validateFields();\n    } catch {\n      return notification.error({\n        message: \"Error\",\n        description: \"Please correct all error fields before submit\",\n      });\n    }\n\n    if (!avatarRef.current.getFile()) {\n      return notification.error({\n        message: \"Error\",\n        description: \"Course's avatar is empty\",\n      });\n    }\n\n    if (!coverRef.current.getFile()) {\n      return notification.error({\n        message: \"Error\",\n        description: \"Course's cover is empty\",\n      });\n    }\n\n    if (contents.length === 0) {\n      return notification.error({\n        message: \"Error\",\n        description: \"There must be at least 1 content\",\n      });\n    }\n\n    let isContentsValid = true;\n    for (const content of contents) {\n      const isContentValid = await (content as any).formRef.current.validate();\n      isContentsValid = isContentsValid && isContentValid;\n    }\n\n    if (!isContentsValid) {\n      return notification.error({\n        message: \"Error\",\n        description: \"Please correct all error fields before submit\",\n      });\n    }\n\n    setSubmitLoading(true);\n    avatarRef.current.processFile();\n    coverRef.current.processFile();\n  }, [form, contents]);\n\n  const editorRef = useRef<any>();\n  const createCourse = useCallback(async () => {\n    const course: ICourse = await form.getFieldsValue();\n    course.contents = [];\n    for (const content of contents) {\n      course.contents.push(await (content as any).formRef.current.getContent());\n    }\n    course.description = editorRef.current.getHtmlContent();\n    course.coverPath = uploadResultRef.current.coverPath;\n    course.avatarPath = uploadResultRef.current.avatarPath;\n    try {\n      let courseId;\n      if (isUpdate) {\n        course.id = propsCourse?.id as any;\n        courseId = course.id;\n        await CourseService.update(course);\n      } else {\n        courseId = await CourseService.add(course);\n      }\n      notification.success({\n        message: \"Success\",\n        description: \"Save course success!\"\n      });\n      history.push(`/courses/save-result/${courseId}`);\n    } catch (err) {\n      console.error(err);\n      NotificationUtils.error(err.message);\n    }\n    setSubmitLoading(false);\n  }, [form, contents, isUpdate, history, propsCourse]);\n\n  const uploadResultRef = useRef<any>({});\n  const onUpLoadSuccessHandler = useCallback(\n    (result) => {\n      uploadResultRef.current[result.state] = result.filePath;\n      if (Object.keys(uploadResultRef.current).length === 2) {\n        createCourse();\n      }\n    },\n    [createCourse]\n  );\n\n  const [avatar] = useState(() => {\n    if (!!propsCourse && propsCourse.avatarPath) {\n      return [\n        {\n          source: `${ASSETS_URL}/${propsCourse.avatarPath}`,\n          options: { type: \"local\" }   \n        }\n      ];\n    }\n  });\n\n  const [cover] = useState(() => {\n    if (!!propsCourse && propsCourse.coverPath) {\n      return [\n        {\n          source: `${ASSETS_URL}/${propsCourse.coverPath}`,\n          options: { type: \"local\" }\n        }\n      ]\n    }\n  });\n\n  let avatarProps: any = {};\n  let coverProps: any = {};\n  if (propsCourse) {\n    if (propsCourse.avatarPath) {\n      avatarProps.files = avatar;\n    }\n\n    if (propsCourse.coverPath) {\n      coverProps.files = cover;\n    }\n  }\n\n  return (\n    <>\n      <h1 className=\"text-xl\">\n        <b>Course information</b>\n      </h1>\n      <Divider />\n      <Form form={form} initialValues={props.course}>\n        <div className=\"flex\">\n          <div className=\"w-1/2 pr-2\">\n            <label className=\"block mb-2\">\n              Category <b className=\"text-red-400\">*</b>\n            </label>\n            <Form.Item name=\"categoryId\" rules={CourseEditFormRules.categoryId}>\n              <CategorySelect onlyChildren={true} />\n            </Form.Item>\n          </div>\n          <div className=\"w-1/2\">\n            <label className=\"block mb-2\">\n              Title <b className=\"text-red-400\">*</b>\n            </label>\n            <Form.Item name=\"title\" rules={CourseEditFormRules.title}>\n              <Input placeholder=\"Title...\" />\n            </Form.Item>\n          </div>\n        </div>\n        <div className=\"flex\">\n          <div className=\"w-1/2 pr-2\">\n            <label className=\"block mb-2\">\n              Price ($) <b className=\"text-red-400\">*</b>\n            </label>\n            <Form.Item name=\"price\" rules={CourseEditFormRules.price}>\n              <InputNumber\n                className=\"w-fulli\"\n                min={0}\n                max={500}\n                placeholder=\"Price...\"\n              />\n            </Form.Item>\n          </div>\n          <div className=\"w-1/2\">\n            <label className=\"block mb-2\">Discount ($)</label>\n            <Form.Item name=\"discount\" rules={CourseEditFormRules.discount}>\n              <InputNumber\n                className=\"w-fulli\"\n                min={0}\n                max={500}\n                placeholder=\"Discount...\"\n              />\n            </Form.Item>\n          </div>\n        </div>\n        <label className=\"block mb-2\">\n          Sub-description <b className=\"text-red-400\">*</b>\n        </label>\n        <Form.Item\n          name=\"subDescription\"\n          rules={CourseEditFormRules.subDescription}\n        >\n          <Input placeholder=\"Sub-description...\" />\n        </Form.Item>\n        <label className=\"block mb-2\">Description</label>\n        <Form.Item name=\"description\">\n          <FdmEditor html={propsCourse?.description} editorRef={editorRef} />\n        </Form.Item>\n        <Form.Item name=\"complete\" valuePropName=\"checked\">\n          <Checkbox>Complete</Checkbox>\n        </Form.Item>\n      </Form>\n      <div>\n        <label className=\"block mb-2\">\n          Avatar <b className=\"text-red-400\">*</b>\n        </label>\n        <Uploader\n          fileType={FileType.IMAGE}\n          state=\"avatarPath\"\n          onUploadSuccess={onUpLoadSuccessHandler}\n          pondRef={avatarRef}\n          {...avatarProps}\n        />\n      </div>\n\n      <div>\n        <label className=\"block mb-2\">Cover</label>\n        <Uploader\n          fileType={FileType.IMAGE}\n          state=\"coverPath\"\n          onUploadSuccess={onUpLoadSuccessHandler}\n          pondRef={coverRef}\n          {...coverProps}\n        />\n      </div>\n\n      <h1 className=\"text-xl mt-8\">\n        <b>Contents</b>\n      </h1>\n      <Divider />\n      <div className=\"flex flex-wrap\">\n        {contents.map((content, idx: number) => (\n          <div className=\"w-1/2 pr-2 mb-2\" key={(content as any).key}>\n            <div className=\"rounded-lg p-3 border relative\">\n              <div\n                className=\"absolute text-red-400 cursor-pointer\"\n                style={{ top: \".3rem\", right: \".3rem\" }}\n              >\n                <Tooltip title=\"Remove\">\n                  <CloseCircleFilled\n                    className=\"text-xl\"\n                    onClick={() => {\n                      contents.splice(idx, 1);\n                      setContents([...contents]);\n                    }}\n                  />\n                </Tooltip>\n              </div>\n              <ContentEditForm\n                content={content}\n                formRef={(content as any).formRef}\n              />\n            </div>\n          </div>\n        ))}\n      </div>\n      <Button type=\"primary\" shape=\"round\" onClick={addContent}>\n        <div className=\"flex items-center\">\n          <PlusCircleOutlined className=\"mr-2\" /> Add content\n        </div>\n      </Button>\n      <Divider />\n      <Button\n        loading={submitLoading}\n        danger\n        type=\"primary\"\n        shape=\"round\"\n        className=\"w-full\"\n        onClick={startProcess}\n      >\n        Save course\n      </Button>\n    </>\n  );\n}\n","import React from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport { CourseEditForm } from '../course/CourseEditForm';\n\nexport function TeacherAddCoursePage(props: RouteComponentProps) {\n  return (\n    <div>\n      <CourseEditForm />\n    </div>\n  )\n}","import React, { useCallback } from \"react\";\nimport { useAuthedUser } from \"../../shared/hooks/useAuthedUser\";\nimport { CourseList } from \"../course/CourseList\";\nimport { CourseService } from \"../course/CourseService\";\nimport { ICourseSearchRequest } from \"../course/types/CourseSearchRequest\";\n\nexport function TeacherDashboardPage() {\n  const { authedUser } = useAuthedUser();\n  const { id: creatorId } = authedUser;\n  const fetchSource = useCallback(\n    (req: ICourseSearchRequest) => {\n      return CourseService.search({ ...req, creatorId });\n    },\n    [creatorId]\n  );\n\n  return (\n    <div>\n      <CourseList fetchSource={fetchSource} />\n    </div>\n  );\n}\n","import React, { useCallback } from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport { FdmLoading } from '../../shared/components/FdmLoading';\nimport { useQuery } from '../../shared/hooks/useQuery.hook';\nimport { CourseEditForm } from '../course/CourseEditForm';\nimport { CourseService } from '../course/CourseService';\n\nexport function TeacherEditCoursePage(props: RouteComponentProps) {\n  const courseId = Number((props.match.params as any).courseId);\n  const fetchCourse = useCallback(() => {\n    return CourseService.getDetail(courseId);\n  }, [courseId]);\n  const courseResponse = useQuery(fetchCourse);\n\n  if (courseResponse.loading || !!courseResponse.error || !courseResponse.data) {\n    return (\n      <div className=\"flex justify-center items-center\">\n        <FdmLoading />\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      <CourseEditForm course={courseResponse.data} />\n    </div>\n  )\n}","import { Tabs } from \"antd\";\nimport React from \"react\";\nimport { Redirect, Route, RouteComponentProps, Switch } from \"react-router\";\nimport { TeacherAddCoursePage } from \"./TeacherAddCoursePage\";\nimport { TeacherDashboardPage } from \"./TeacherDashboardPage\";\nimport { TeacherEditCoursePage } from \"./TeacherEditCoursePage\";\n\nexport function TeacherPage(props: RouteComponentProps) {\n  const { location } = props;\n  return (\n    <div>\n      <Tabs\n        activeKey={location.pathname}\n        onChange={(pathname) => props.history.push(pathname)}\n      >\n        <Tabs.TabPane key=\"/teacher/dashboard\" tab=\"Dashboard\" />\n        <Tabs.TabPane key=\"/teacher/add-course\" tab=\"Add course\" />\n      </Tabs>\n      <Switch>\n        <Redirect exact path=\"/teacher\" to=\"/teacher/dashboard\" />\n        <Route path=\"/teacher/dashboard\" component={TeacherDashboardPage} />\n        <Route path=\"/teacher/add-course\" component={TeacherAddCoursePage} />\n        <Route\n          path=\"/teacher/edit-course/:courseId\"\n          component={TeacherEditCoursePage}\n        />\n      </Switch>\n    </div>\n  );\n}\n","import { HeartFilled } from \"@ant-design/icons\";\nimport React, { useCallback } from \"react\";\nimport { CourseList } from \"../course/CourseList\";\nimport { CourseService } from \"../course/CourseService\";\nimport { ICourseSearchRequest } from \"../course/types/CourseSearchRequest\";\n\nexport function WatchListPage() {\n  const fetchSource = useCallback((request: ICourseSearchRequest) => {\n    return CourseService.search({\n      ...request,\n      onlyWatchList: true,\n    });\n  }, []);\n  return (\n    <div>\n      <h1 className=\"text-3xl text-red-400 flex items-center\">\n        <HeartFilled className=\"mr-2\" /> Your watch list\n      </h1>\n      <CourseList fetchSource={fetchSource} />\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Redirect, Route, RouteProps } from \"react-router\";\nimport { AuthService } from \"../../modules/auth/AuthService\";\nimport { UserRole } from \"../enums/UserRole\";\nimport { useAuthedUser } from \"../hooks/useAuthedUser\";\nimport { FdmLoading } from \"./FdmLoading\";\n\ninterface Props extends RouteProps {\n  component: any;\n  roles?: UserRole[];\n}\n\nexport const FdmAuthedRoute: React.FC<Props> = ({\n  component: Component,\n  roles,\n  ...rest\n}) => {\n  const { authedUser, loading } = useAuthedUser();\n  return (\n    <Route\n      {...rest}\n      render={(props) => {\n        if (loading) {\n          return <FdmLoading />;\n        }\n\n        if (AuthService.isAuthed && (!roles || roles.includes((authedUser as any).role))) {\n          return <Component {...props} />;\n        }\n\n        return (\n          <Redirect\n            to={{ pathname: \"/auth/login\", state: { redirect: props.location.pathname } }}\n          />\n        );\n      }}\n    />\n  );\n};\n","import { Button, Result } from \"antd\";\nimport React from \"react\";\nimport { useHistory } from \"react-router\";\n\nexport function NotFoundPage() {\n  const history = useHistory();\n  return (\n    <Result\n      status=\"404\"\n      title=\"Page not found\"\n      extra={[\n        <Button\n          type=\"primary\"\n          shape=\"round\"\n          key=\"home\"\n          onClick={() => history.push(\"/\")}\n        >\n          Go to home page\n        </Button>,\n      ]}\n    />\n  );\n}\n","import React from \"react\";\nimport { Route, Switch } from \"react-router\";\nimport { AdminPage } from \"./modules/admin/AdminPage\";\nimport { AuthPage } from \"./modules/auth/AuthPage\";\nimport { CoursePage } from \"./modules/course/CoursePage\";\nimport { EnrollmentPage } from \"./modules/enrollment/EnrollmentPage\";\nimport { HomePage } from \"./modules/home/HomePage\";\nimport { ProfilePage } from \"./modules/profile/ProfilePage\";\nimport { TeacherPage } from \"./modules/teacher/TeacherPage\";\nimport { WatchListPage } from \"./modules/watch-list/WatchListPage\";\nimport { FdmAuthedRoute } from \"./shared/components/FdmAuthedRoute\";\nimport { UserRole } from \"./shared/enums/UserRole\";\nimport { NotFoundPage } from \"./shared/pages/NotFound.page\";\n\nexport function AppRoutes() {\n  return (\n    <Switch>\n      <Route exact path=\"/\" component={HomePage} />\n      <Route path=\"/auth\" component={AuthPage} />\n      <Route path=\"/courses\" component={CoursePage} />\n      <FdmAuthedRoute\n        path=\"/teacher\"\n        roles={[UserRole.TEACHER]}\n        component={TeacherPage}\n      />\n      <FdmAuthedRoute path=\"/profile\" component={ProfilePage} />\n      <FdmAuthedRoute path=\"/watch-list\" component={WatchListPage} />\n      <FdmAuthedRoute path=\"/enrollment\" component={EnrollmentPage} />\n      <FdmAuthedRoute\n        path=\"/admin\"\n        roles={[UserRole.ADMIN]}\n        component={AdminPage}\n      />\n      <Route path=\"*\" component={NotFoundPage} />\n    </Switch>\n  );\n}\n","import moment from 'moment';\nimport React from 'react';\n\nexport function FdmFooter() {\n  return (\n    <div className=\"flex w-full justify-center border-t\">\n      <div className=\"container p-5 flex justify-center items-center text-blue-400\">\n        <b>{moment().year()} @ Fademy</b>\n      </div>\n    </div>\n  )\n}","import React from 'react';\nimport { Menu } from 'antd';\nimport { useHistory } from 'react-router';\nimport { ICategory } from '../entities/ICategory';\n\ninterface IFdmCategoryMenuProps {\n  categories: ICategory[];\n}\n\nexport function FdmCategoryMenu(props: IFdmCategoryMenuProps) {\n  const history = useHistory();\n  \n  function navigate(category: ICategory) {\n    history.push(`/courses/${category.id}`);\n  }\n\n  return (\n    <Menu>\n      {props.categories.map(parent => (\n        <Menu.SubMenu key={parent.id} title={parent.name} onTitleClick={() => navigate(parent)}>\n          {parent.children.map(child => (\n            <Menu.Item key={child.id} onClick={() => navigate(child)}>{child.name}</Menu.Item>\n          ))}\n        </Menu.SubMenu>\n      ))}\n    </Menu>\n  )\n}","import { BookOutlined, HeartOutlined, PoweroffOutlined, UserOutlined } from '@ant-design/icons';\nimport { Menu } from 'antd';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { AuthService } from '../../modules/auth/AuthService';\nimport { IUser } from '../entities/IUser';\n\ninterface IFdmUserDropdownMenuProps {\n  user?: IUser;\n}\n\nexport function FdmUserDropdownMenu(props: IFdmUserDropdownMenuProps) {\n  return (\n    <Menu>\n      <Menu.Item>\n        <Link to=\"/profile\" className=\"flex items-center\">\n          <UserOutlined /> Profile\n        </Link>\n      </Menu.Item>\n      <Menu.Item>\n        <Link to=\"/watch-list\" className=\"flex items-center\">\n          <HeartOutlined /> Watch list\n        </Link>\n      </Menu.Item>\n      <Menu.Item>\n        <Link to=\"/enrollment\" className=\"flex items-center\">\n          <BookOutlined /> Enrollment\n        </Link>\n      </Menu.Item>\n      <Menu.Item onClick={() => AuthService.logout()}>\n        <div className=\"flex items-center text-red-400\">\n          <PoweroffOutlined /> Logout\n        </div>\n      </Menu.Item>\n    </Menu>\n  )\n}","import React, { useEffect, useMemo } from \"react\";\nimport { Button, Dropdown, Input } from \"antd\";\nimport { Link, NavLink, useHistory } from \"react-router-dom\";\nimport { CategoryService } from \"../../modules/category/CategoryService\";\nimport { useQuery } from \"../hooks/useQuery.hook\";\n\nimport { FdmCategoryMenu } from \"./FdmCategoryMenu\";\nimport { FdmLogo } from \"./FdmLogo\";\nimport { CaretDownOutlined, LoadingOutlined } from \"@ant-design/icons\";\nimport { useAuthedUser } from \"../hooks/useAuthedUser\";\nimport { AuthService } from \"../../modules/auth/AuthService\";\nimport { FdmUserDropdownMenu } from \"./FdmUserDropdownMenu\";\nimport { useFdmStore } from \"../store/useFdmStore\";\nimport { useCompKey } from \"../hooks/useCompKey\";\nimport { UserRole } from \"../enums/UserRole\";\n\nexport function FdmHeader() {\n  const history = useHistory();\n  const categories = useQuery(CategoryService.all);\n  const categoryMenu = useMemo(() => {\n    if (!!categories.data) {\n      return <FdmCategoryMenu categories={categories.data} />;\n    }\n    return <>Loading...</>;\n  }, [categories.data]);\n\n  const { authedUser, loading } = useAuthedUser();\n  const userDropdownMenu = useMemo(() => {\n    return <FdmUserDropdownMenu user={authedUser as any} />;\n  }, [authedUser]);\n\n  const [globalState, dispatch] = useFdmStore();\n  const searchTermCompKey = useCompKey();\n  const renewSearchTermCompKey = searchTermCompKey.renewCompKey;\n\n  useEffect(() => {\n    renewSearchTermCompKey();\n  }, [globalState.searchTerm, renewSearchTermCompKey]);\n\n  return (\n    <div\n      className=\"w-full shadow h-16 fixed flex justify-center top-0 bg-white\"\n      style={{ zIndex: 10 }}\n    >\n      <div className=\"container flex items-center\">\n        <div className=\"flex w-full items-center\">\n          <Link to=\"/\" className=\"flex items-center\">\n            <FdmLogo />\n            <b className=\"ml-2 text-blue-400 text-xl\">Fademy</b>\n          </Link>\n          <NavLink\n            to=\"/\"\n            exact\n            className=\"text-gray-400 hover:text-gray-700 mx-4\"\n            activeClassName=\"text-gray-700\"\n          >\n            Home\n          </NavLink>\n          <Dropdown overlay={categoryMenu} overlayClassName=\"shadow\">\n            <div className=\"cursor-pointer text-gray-400 hover:text-gray-700 flex items-center\">\n              Categories <CaretDownOutlined />\n            </div>\n          </Dropdown>\n          {authedUser?.role === UserRole.TEACHER && (\n            <NavLink\n              to=\"/teacher\"\n              className=\"text-gray-400 hover:text-gray-700 mx-4\"\n              activeClassName=\"text-gray-700\"\n            >\n              Teacher\n            </NavLink>\n          )}\n          {authedUser?.role === UserRole.ADMIN && (\n            <NavLink\n              to=\"/admin\"\n              className=\"text-gray-400 hover:text-gray-700 mx-4\"\n              activeClassName=\"text-gray-700\"\n            >\n              Admin\n            </NavLink>\n          )}\n        </div>\n\n        <div className=\"ml-auto flex items-center\">\n          <Input.Search\n            key={searchTermCompKey.compKey}\n            allowClear\n            defaultValue={globalState.searchTerm}\n            placeholder=\"Search courses...\"\n            className=\"rounded mr-4\"\n            style={{ width: \"250px\" }}\n            onSearch={(searchTerm) => {\n              dispatch(\"SET_SEARCH_TERM\", searchTerm);\n              history.push(`/courses/0`);\n            }}\n          />\n          {AuthService.isAuthed ? (\n            <Dropdown\n              overlay={userDropdownMenu as any}\n              overlayClassName=\"shadow\"\n            >\n              {loading ? (\n                <>\n                  <LoadingOutlined className=\"mr-1\" /> Loading...\n                </>\n              ) : (\n                <Button type=\"primary\" shape=\"round\">\n                  <div className=\"flex items-center\">\n                    <span className=\"mr-2\">{authedUser?.email}</span>{\" \"}\n                    <CaretDownOutlined />\n                  </div>\n                </Button>\n              )}\n            </Dropdown>\n          ) : (\n            <>\n              <NavLink\n                to=\"/auth/login\"\n                className=\"text-gray-400 hover:text-gray-700 mr-4\"\n                activeClassName=\"text-gray-700\"\n              >\n                Login\n              </NavLink>\n              <NavLink\n                to=\"/auth/register\"\n                className=\"text-gray-400 hover:text-gray-700\"\n              >\n                <Button shape=\"round\" type=\"primary\">\n                  Get started\n                </Button>\n              </NavLink>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { AppRoutes } from './AppRoutes';\nimport { FdmFooter } from './shared/components/FdmFooter';\nimport { FdmHeader } from './shared/components/FdmHeader';\n\nfunction App() {\n  return (\n    <>\n      <FdmHeader />\n      <div className=\"mt-24 mb-12 flex w-full justify-center\">\n        <div className=\"container\">\n          <AppRoutes />\n        </div>\n      </div>\n      <FdmFooter />\n    </>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","// @ts-ignore\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles/index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { initAxiosInterceptors } from \"./initAxiosInterceptors\";\nimport { FdmStore } from \"./shared/store/FdmStore\";\nimport { registerPlugin } from 'filepond';\nimport FilePondPluginFileValidateSize from 'filepond-plugin-file-validate-size';\nimport FilePondPluginFileValidateType from 'filepond-plugin-file-validate-type';\nimport FilePondPluginImagePreview from 'filepond-plugin-image-preview';\nimport FilePondPluginImageResize from 'filepond-plugin-image-resize';\n\nimport \"antd/dist/antd.css\";\nimport \"slick-carousel/slick/slick.css\";\nimport \"slick-carousel/slick/slick-theme.css\";\nimport 'filepond/dist/filepond.min.css';\nimport 'filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css';\nimport 'filepond-plugin-media-preview/dist/filepond-plugin-media-preview.min.css';\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport \"./styles/index.css\";\nimport 'video-react/dist/video-react.css';\n\nconst FilePondPluginMediaPreview = require('filepond-plugin-media-preview');\n\nregisterPlugin(\n  FilePondPluginFileValidateSize,\n  FilePondPluginFileValidateType,\n  FilePondPluginImagePreview,\n  FilePondPluginImageResize,\n  FilePondPluginMediaPreview\n);\n\ninitAxiosInterceptors();\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <FdmStore>\n        <App />\n      </FdmStore>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import Axios from \"axios\";\nimport { AuthService } from \"./modules/auth/AuthService\";\nimport { AuthedApiEndpoints } from \"./shared/constants/ApiEndpoint\";\n\nexport function initAxiosInterceptors() {\n  Axios.interceptors.request.use((req) => {\n    const accessToken = AuthService.accessToken;\n    if (!accessToken) {\n      if (AuthedApiEndpoints.includes(req.url as any)) {\n        window.location.pathname = \"/auth/login\";\n      }\n    } else {\n      req.headers.Authorization = `Bearer ${accessToken}`;\n    }\n\n    return req;\n  });\n\n  Axios.interceptors.response.use(\n    (resp) => resp,\n    async (err) => {\n      if (AuthedApiEndpoints.includes(err.config.url as any)) {\n        if (err?.response?.status === 401) {\n          if (!!(await AuthService.refreshAccessToken())) {\n            return Axios.request(err.config);\n          }\n          window.location.pathname = \"/auth/login\";\n          return;\n        }\n      }\n      throw err;\n    }\n  );\n}\n"],"sourceRoot":""}